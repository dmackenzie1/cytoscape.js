
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.0beta2-github-snapshot-2012.11.30-14.22.05.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}},array:function(b){return b!=null&&b instanceof Array
},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(w){var t;var k=a.util.regex.number;var n,x,j,v,c,o,u;var i=new RegExp("^hsl[a]?\\(("+k+")\\s*,\\s*("+k+"[%])\\s*,\\s*("+k+"[%])(?:\\s*,\\s*("+k+"))?\\)$").exec(w);if(i){n=parseInt(i[1]);if(n<0){n=(360-(-1*n%360))%360}else{if(n>360){n=n%360}}n/=360;x=parseFloat(i[2]);if(x<0||x>100){return
}x=x/100;j=parseFloat(i[3]);if(j<0||j>100){return}j=j/100;v=i[4];if(v!==undefined){v=parseFloat(v);if(v<0||v>1){return}}if(x===0){c=o=u=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return Math.round(255*h)}var d=j<0.5?j*(1+x):j+x-j*x;var e=2*j-d;c=f(e,d,n+1/3);o=f(e,d,n);u=f(e,d,n-1/3)}t=[c,o,u,v]}return t},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},regex:{number:"(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)"},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}
})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(n,j,u,k,p,i,o,h,l,f,m){var v=Math.min(n,u)-m;var s=Math.min(j,k)-m;var t=Math.max(n,u)+m;var r=Math.max(j,k)+m;if(p>=v&&p<=t&&i>=s&&i<=r){return 2}else{if(l>=v&&l<=t&&f>=s&&f<=r){return 2}else{if(o>=v&&o<=t&&h>=s&&h<=r){return 1}}}var g=Math.min(p,o,l);var e=Math.min(i,h,f);var d=Math.max(p,o,l);var c=Math.max(i,h,f);if(g>t||d<v||e>r||c<s){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(r,k,y,n,t,g,s,d,p){var z=Math.min(r,y)-p;
var w=Math.min(k,n)-p;var x=Math.max(r,y)+p;var v=Math.max(k,n)+p;var h=s-t;var m=t;var u;var e=d-g;var l=g;var o;if(Math.abs(h)<0.0001){return(t>=z&&t<=x&&Math.min(g,d)<=w&&Math.max(g,d)>=v)}var c=(z-m)/h;if(c>0&&c<=1){u=e*c+l;if(u>=w&&u<=v){return true}}var j=(x-m)/h;if(j>0&&j<=1){u=e*j+l;if(u>=w&&u<=v){return true}}var f=(w-l)/e;if(f>0&&f<=1){o=h*f+m;if(o>=z&&o<=x){return true}}var i=(v-l)/e;if(i>0&&i<=1){o=h*i+m;if(o>=z&&o<=x){return true}}return false};b.math.checkBezierCrossesBox=function(w,h,J,y,p,S,l,P,j,M,d){var s=Math.min(w,J)-d;
var o=Math.min(h,y)-d;var R=Math.max(w,J)+d;var O=Math.max(h,y)+d;if(p>=s&&p<=R&&S>=o&&S<=O){return true}else{if(j>=s&&j<=R&&M>=o&&M<=O){return true}}var v=p-2*l+j;var g=-2*p+2*l;var F=p;var z=[];if(Math.abs(v)<0.0001){var K=(s-p)/g;var x=(R-p)/g;z.push(K,x)}else{var C=g*g-4*v*(F-s);var t,r;if(C>0){var D=Math.sqrt(C);t=(-g+D)/(2*v);r=(-g-D)/(2*v);z.push(t,r)}var B=g*g-4*v*(F-R);var n,k;if(B>0){var D=Math.sqrt(B);n=(-g+D)/(2*v);k=(-g-D)/(2*v);z.push(n,k)}}z.sort(function(U,T){return U-T});var u=S-2*P+M;
var e=-2*S+2*P;var E=S;var I=[];if(Math.abs(u)<0.0001){var f=(o-S)/e;var G=(O-S)/e;I.push(f,G)}else{var m=e*e-4*u*(E-o);var c,Q;if(m>0){var D=Math.sqrt(m);c=(-e+D)/(2*u);Q=(-e-D)/(2*u);I.push(c,Q)}var i=e*e-4*u*(E-O);var N,L;if(i>0){var D=Math.sqrt(i);N=(-e+D)/(2*u);L=(-e-D)/(2*u);I.push(N,L)}}I.sort(function(U,T){return U-T});for(var A=0;A<z.length;A+=2){for(var H=1;H<I.length;H+=2){if(z[A]<I[H]&&I[H]>=0&&z[A]<=1&&z[A+1]>I[H-1]&&I[H-1]<=1&&z[A+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,t,e,s,d,r,c,A){var k=0.25*t+0.5*s+0.25*r;
var j=0.25*e+0.5*d+0.25*c;var n,m,w,u;var g,f,l;var z=function(C,I,D,B,H,G,E,F){g=(G-B)*(C-D)+(D-H)*(I-B);f=g*g;sideSquared=(G-B)*(G-B)+(D-H)*(D-H);if(F){if(g>0){return false}}else{if(g<0){return false}}return(f/sideSquared>E)};var p=(k+s)/2;var o=(j+d)/2;var v=true;if(z(p,o,t,e,s,d,0,v)){v=!v}return(!z(i,h,t,e,s,d,A,v)&&!z(i,h,s,d,r,c,A,v)&&!z(i,h,r,c,t,e,A,v))};b.math.solveCubic=function(n,m,l,k,u){m/=n;l/=n;k/=n;var f,g,e,i,p,o,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;u[1]=0;
h=(m/3);if(f>0){p=e+Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));o=e-Math.sqrt(f);o=((o<0)?-Math.pow(-o,(1/3)):Math.pow(o,(1/3)));u[0]=-h+p+o;h+=(p+o)/2;u[4]=u[2]=-h;h=Math.sqrt(3)*(-o+p)/2;u[3]=h;u[5]=-h;return}u[5]=u[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));u[0]=-h+2*j;u[4]=u[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);u[0]=-h+j*Math.cos(i/3);u[2]=-h+j*Math.cos((i+2*Math.PI)/3);u[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(p,o,v,j,u,h,t,g){var D=1*v*v-4*v*u+2*v*t+4*u*u-4*u*t+t*t+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;
var C=1*9*v*u-3*v*v-3*v*t-6*u*u+3*u*t+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var A=1*3*v*v-6*v*u+v*t-v*p+2*u*u+2*u*p-t*p+3*j*j-6*j*h+j*g-j*o+2*h*h+2*h*o-g*o;var z=1*v*u-v*v+v*p-u*p+j*h-j*j+j*o-h*o;a("coefficients: "+D/D+", "+C/D+", "+A/D+", "+z/D);var k=[];this.solveCubic(D,C,A,z,k);var e=1e-7;var B=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){B.push(k[l])}}B.push(1);B.push(0);var f=-1;var w;var n,m,r;for(var s=0;s<B.length;s++){n=Math.pow(1-B[s],2)*v+2*(1-B[s])*B[s]*u+B[s]*B[s]*t;m=Math.pow(1-B[s],2)*j+2*(1-B[s])*B[s]*h+B[s]*B[s]*g;
r=Math.pow(n-p,2)+Math.pow(m-o,2);a("distance for param "+B[s]+": "+Math.sqrt(r));if(f>=0){if(r<f){f=r;w=B[s]}}else{f=r;w=B[s]}}a("given: ( "+p+", "+o+"), ( "+v+", "+j+"), ( "+u+", "+h+"), ( "+t+", "+g+")");a("roots: "+k);a("params: "+B);a("closest param: "+w);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,f){var h;if(a.is.core(b)){h=b}else{if(a.is.domElement(b)){f=b}}var e=+new Date;
var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;d=a.instanceCounter;var g="cy-"+e+"-"+d;var c={id:g,cy:h,domElement:f,readies:[]};a.instances.push(c);a.instances[g]=c;return c};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g.instanceId();return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];
if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)
}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)
}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var n=l.cy;var m=h;if(n&&a.is.fn(n[m])){var i=n[m].apply(n,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;
b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;
var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,s){var g=c;var x=this;var f=x.length!==undefined;var t=f?x:[x];var w=f?x[0]:x;if(a.is.string(e)){if(g.allowGetting&&s===undefined){var o;if(w){o=w._private[g.field][e]}return o}else{if(g.allowSetting&&s!==undefined){var d=!g.immutableKeys[e];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][e]=s}if(g.updateMappers){x.updateMappers()}if(g.settingTriggersEvent){x[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,u;for(j in m){u=m[j];var d=!g.immutableKeys[j];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][j]=u}}}if(g.updateMappers){x.updateMappers()}if(g.settingTriggersEvent){x[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var r=e;x.bind(g.bindingEvent,r)}else{if(g.allowGetting&&e===undefined){var o;if(w){o=w._private[g.field]}return o}}}}return x}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(o){var g=c;var v=this;var f=v.length!==undefined;var r=f?v:[v];var t=f?v[0]:v;if(a.is.string(o)){var u=o.split(/\s+/);var j=u.length;for(var k=0;k<j;k++){var s=u[k];if(a.is.emptyString(s)){continue}var e=!g.immutableKeys[s];if(e){for(var n=0,h=r.length;n<h;n++){delete r[n]._private[g.field][s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}else{if(o===undefined){for(var n=0,h=r.length;n<h;n++){var m=r[n]._private[g.field];for(var s in m){var d=!g.immutableKeys[s];
if(d){delete m[s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}}return v}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,u,z,k){var r=this;var d=r.length!==undefined;var f=d?r:[r];var x=d?r[0]:r;var w=a.is.string(e);var s=c;if(a.is.plainObject(u)){k=z;z=u;u=undefined}else{if(a.is.fn(u)||u===false){k=u;
z=undefined;u=undefined}}if(a.is.fn(z)||z===false){k=z;z=undefined}if(!(a.is.fn(k)||k===false)&&w){return r}if(w){var y={};y[e]=k;e=y}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var v=0;v<l.length;v++){var o=l[v];if(a.is.emptyString(o)){continue}var m=o.match(a.define.event.regex);if(m){var g=m[1];var n=m[2]?m[2]:undefined;var h={callback:k,data:z,delegated:u?true:false,selector:u,type:g,namespace:n,unbindSelfOnTrigger:s.unbindSelfOnTrigger,unbindAllBindersOnTrigger:s.unbindAllBindersOnTrigger,binders:f};
for(var t=0;t<f.length;t++){f[t]._private.listeners.push(h)}}}}return r}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,z,l){var t=this;var d=t.length!==undefined;var f=d?t:[t];var D=d?t[0]:t;var C=a.is.string(e);var u=c;if(arguments.length===0){for(var A=0;A<f.length;A++){f[A]._private.listeners=[]}return t}if(a.is.fn(z)||z===false){l=z;z=undefined}if(C){var F={};F[e]=l;e=F}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var B=0;B<m.length;
B++){var s=m[B];if(a.is.emptyString(s)){continue}var n=s.match(a.define.event.optionalTypeRegex);if(n){var g=n[1]?n[1]:undefined;var r=n[2]?n[2]:undefined;for(var A=0;A<f.length;A++){var v=f[A]._private.listeners;for(var y=0;y<v.length;y++){var k=v[y];var o=!r||r===k.namespace;var w=!g||k.type===g;var x=!l||l===k.callback;var E=o&&w&&x;if(E){v.splice(y,1);y--}}}}}}return t}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(D,g,y){var o=this;var v=o.length!==undefined;var z=v?o:[o];
var E=v?o[0]:o;var J=a.is.string(D);var h=a.is.plainObject(D);var f=a.is.event(D);var R=c;var A=this._private.cy||this;if(J){var L=D.split(/\s+/);D=[];for(var W=0;W<L.length;W++){var G=L[W];if(a.is.emptyString(G)){continue}var n=G.match(a.define.event.regex);var ab=n[1];var M=n[2]?n[2]:undefined;D.push({type:ab,namespace:M})}}else{if(h){var Y=D;D=[Y]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var W=0;W<D.length;W++){var r=D[W];for(var V=0;V<z.length;V++){var K=z[V];var P=K._private.listeners;
var d=a.is.element(K);var C=d;var G;if(f){G=r;G.cyTarget=G.cyTarget||K;G.cy=G.cy||A;G.namespace=G.namespace||r.namespace}else{G=new a.Event(r,{cyTarget:K,cy:A,namespace:r.namespace});var F=a.define.event.props;for(var U=0;U<F.length;U++){var x=F[U];G[x]=r[x]}}if(y){P=[{namespace:G.namespace,type:G.type,callback:y}]}for(var U=0;U<P.length;U++){var e=P[U];var N=!e.namespace||e.namespace===G.namespace;var w=e.type===G.type;var O=e.delegated?(K!==G.cyTarget&&a.is.element(G.cyTarget)&&G.cyTarget.is(e.selector)):(true);
var H=N&&w&&O;if(H){var Q=[G];Q=Q.concat(g);if(e.data){G.data=e.data}else{G.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){P.splice(U,1);U--}if(e.unbindAllBindersOnTrigger){var u=e.binders;for(var T=0;T<u.length;T++){var t=u[T];if(!t||t===K){continue}var B=t._private.listeners;for(var S=0;S<B.length;S++){var Z=B[S];if(Z===e){B.splice(S,1);S--}}}}var aa=e.delegated?G.cyTarget:K;var I=e.callback.apply(aa,Q);if(I===false||G.isPropagationStopped()){C=false;if(I===false){G.stopPropagation();
G.preventDefault()}}}}if(C){var s=K.parent();var X=s.length!==0;if(X){s=s[0];s.trigger(G)}else{A.trigger(G)}}}}return o}}}})(cytoscape);(function(a,b){a.Style=function(c){if(!(this instanceof a.Style)){return new a.Style(c)}if(!a.is.core(c)){a.util.error("A style must have a core reference");return}this._private={cy:c,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};a.style=a.Style;a.styfn=a.Style.prototype;a.fn.style=function(c,d){for(var f in c){var e=c[f];a.Style.prototype=e}};a.stylesheet=a.Stylesheet=function(){if(!(this instanceof a.Stylesheet)){return new a.Stylesheet()
}this.length=0};a.Stylesheet.prototype.selector=function(c){var d=this.length++;this[d]={selector:c,properties:[]};return this};a.Stylesheet.prototype.css=function(e,g){var f=this.length-1;if(a.is.string(e)){this[f].properties.push({name:e,value:g})}else{if(a.is.plainObject(e)){map=e;for(var d=0;d<a.style.properties.length;d++){var h=a.style.properties[d];var c=map[h.name];if(c===undefined){c=map[a.util.dash2camel(h.name)]}if(c!==undefined){var e=h.name;var g=c;this[f].properties.push({name:e,value:g})
}}}}return this};a.Stylesheet.prototype.generateStyle=function(l){var h=new a.Style(l);for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}return h};a.Stylesheet.prototype.assignToStyle=function(h){h.clear();for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}};(function(){var f=a.util.regex.number;
a.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*(\\w+)\\s*\\,\\s*(\\w+)\\)$"}};
var d=a.style.types;a.style.properties=[{name:"cursor",type:d.cursor},{name:"text-valign",type:d.valign},{name:"text-halign",type:d.halign},{name:"color",type:d.color},{name:"content",type:d.text},{name:"text-outline-color",type:d.color},{name:"text-outline-width",type:d.size},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-opacity",type:d.zeroOneNumber},{name:"text-decoration",type:d.textDecoration},{name:"text-transform",type:d.textTransform},{name:"font-family",type:d.fontFamily},{name:"font-style",type:d.fontStyle},{name:"font-variant",type:d.fontVariant},{name:"font-weight",type:d.fontWeight},{name:"font-size",type:d.size},{name:"visibility",type:d.visibility},{name:"opacity",type:d.zeroOneNumber},{name:"z-index",type:d.nonNegativeInt},{name:"background-color",type:d.color},{name:"background-opacity",type:d.zeroOneNumber},{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size},{name:"border-style",type:d.lineStyle},{name:"height",type:d.size},{name:"width",type:d.size},{name:"shape",type:d.nodeShape},{name:"source-arrow-shape",type:d.arrowShape},{name:"target-arrow-shape",type:d.arrowShape},{name:"source-arrow-color",type:d.color},{name:"target-arrow-color",type:d.color},{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"control-point-step-size",type:d.size},{name:"curve-style",type:d.curveStyle},{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"panning-cursor",type:d.cursor}];
var e=a.style.properties;for(var c=0;c<e.length;c++){var g=e[c];e[g.name]=g}})();a.styfn.addDefaultStylesheet=function(){var c=this.containerPropertyAsString("font-family")||"sans-serif";var i=this.containerPropertyAsString("font-style")||"normal";var f=this.containerPropertyAsString("font-variant")||"normal";var e=this.containerPropertyAsString("font-weight")||"normal";var d=this.containerPropertyAsString("color")||"#000";var j=this.containerPropertyAsString("text-transform")||"none";var h=this.containerPropertyAsString("text-decoration")||"none";
var g=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:d,content:undefined,"text-outline-color":"transparent","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":j,"font-family":c,"font-style":i,"font-variant":f,"font-weight":e,"font-size":g,visibility:"visible",opacity:1,"z-index":0,content:""}).selector("node").css({"background-color":"#888","background-opacity":1,"border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse"}).selector("edge").css({"source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb",width:1,"control-point-step-size":40,"curve-style":"bezier"}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing"})
};a.styfn.clear=function(){for(var c=0;c<this.length;c++){delete this[c]}this.length=0;return this};a.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};a.styfn.core=function(){return this._private.coreStyle};a.styfn.parse=function(z,t,l){z=a.util.camel2dash(z);var h=a.style.properties[z];if(!h){return null}if(t===undefined||t===null){return null}var j=a.is.string(t);if(j){t=a.util.trim(t)}var g=h.type;if(!g){return null}if(l&&(t===""||t===null)){return{name:z,value:t,bypass:true,deleteBypass:true}
}var y,o;if(!j){}else{if(y=new RegExp(a.style.types.data.regex).exec(t)){return{name:z,value:y,strValue:t,mapped:a.style.types.data,field:y[1],bypass:l}}else{if(o=new RegExp(a.style.types.mapData.regex).exec(t)){if(!(g.color||g.number)){return false}var d=this.parse(z,o[4]);if(!d||d.mapped){return false}var f=this.parse(z,o[5]);if(!f||f.mapped){return false}if(d.value===f.value){return false}else{if(g.color){var r=d.value;var p=f.value;var v=r[0]===p[0]&&r[1]===p[1]&&r[2]===p[2]&&(r[3]===p[3]||((r[3]==null||r[3]===1)&&(p[3]==null||p[3]===1)));
if(v){return false}}}return{name:z,value:o,strValue:t,mapped:a.style.types.mapData,field:o[1],fieldMin:parseFloat(o[2]),fieldMax:parseFloat(o[3]),valueMin:d.value,valueMax:f.value,bypass:l}}}}if(g.number){var u;if(!g.unitless){if(j){var k=t.match("^("+a.util.regex.number+")(px|em)?$");if(!k){return null}t=k[1];u=k[2]||"px"}else{u="px"}}t=parseFloat(t);if(g.integer&&!a.is.integer(t)){return null}if((g.min!==undefined&&t<g.min)||(g.max!==undefined&&t>g.max)){return null}var x={name:z,value:t,strValue:""+t+(u?u:""),units:u,bypass:l,pxValue:g.unitless?undefined:(u==="px"||!u?(t):(this.getEmSizeInPixels()*t))};
return x}else{if(g.color){var n=a.util.color2tuple(t);return{name:z,value:n,strValue:t,bypass:l}}else{if(g.enums){for(var w=0;w<g.enums.length;w++){var c=g.enums[w];if(c===t){return{name:z,value:t,strValue:t,bypass:l}}}}else{if(g.regex){var e=new RegExp(g.regex);var s=e.exec(t);if(s){return{name:z,value:s,strValue:t,bypass:l}}else{return null}}else{if(g.string){return{name:z,value:t,strValue:t,bypass:l}}else{return null}}}}}};a.styfn.getEmSizeInPixels=function(){var f=this._private.cy;var e=f.container();
if(b&&e){var d=b.getComputedStyle(e).getPropertyValue("font-size");var c=parseFloat(d);return c}else{return 1}};a.styfn.containerCss=function(c){var e=this._private.cy;var d=e.container();if(b&&d){return b.getComputedStyle(d).getPropertyValue(c)}};a.styfn.containerProperty=function(d){var c=this.containerCss(d);var e=this.parse(d,c);return e};a.styfn.containerPropertyAsString=function(c){var d=this.containerProperty(c);if(d){return d.strValue}};a.styfn.selector=function(d){var c=d==="core"?null:new a.Selector(d);
var e=this.length++;this[e]={selector:c,properties:[]};return this};a.styfn.css=function(){var d=arguments;switch(d.length){case 1:var f=d[0];for(var e=0;e<a.style.properties.length;e++){var g=a.style.properties[e];var c=f[g.name];if(c===undefined){c=f[a.util.dash2camel(g.name)]}if(c!==undefined){this.cssRule(g.name,c)}}break;case 2:this.cssRule(d[0],d[1]);break;default:break}return this};a.styfn.cssRule=function(c,g){var f=this.parse(c,g);if(f){var d=this.length-1;this[d].properties.push(f);var e=!this[d].selector;
if(e){this._private.coreStyle[f.name]=f}}return this};a.styfn.applyParsedProperty=function(n,v){var g=v;var t=n._private.style;var l,i;var h=a.style.properties[g.name].type;var m=g.bypass;var u=t[g.name];var p=u&&u.bypass;if(m&&g.deleteBypass){var o=t[g.name];if(!o){return true}else{if(o.bypass&&o.bypassed){t[g.name]=o.bypassed;return true}else{return false}}}switch(g.mapped){case a.style.types.mapData:l=n._private.data[g.field];if(!a.is.number(l)){return false}var d=(l-g.fieldMin)/(g.fieldMax-g.fieldMin);
if(h.color){var s=g.valueMin[0];var r=g.valueMax[0];var c=g.valueMin[1];var y=g.valueMax[1];var k=g.valueMin[2];var j=g.valueMax[2];var x=g.valueMin[3]==null?1:g.valueMin[3];var w=g.valueMax[3]==null?1:g.valueMax[3];var f=[Math.round(s+(r-s)*d),Math.round(c+(y-c)*d),Math.round(k+(j-k)*d),Math.round(x+(w-x)*d)];i={bypass:g.bypass,name:g.name,value:f,strValue:["rgba(",f[0],", ",f[1],", ",f[2],", ",f[3],")"].join("")}}else{if(h.number){var e=g.valueMin+(g.valueMax-g.valueMin)*d;i=this.parse(g.name,e,g.bypass)
}else{return false}}if(!i){return false}i.mapping=g;g=i;break;case a.style.types.data:l=n._private.data[g.field];i=this.parse(g.name,l,g.bypass);if(!i){return false}i.mapping=g;g=i;break;case undefined:break;default:return false}if(m){if(p){g.bypassed=u.bypassed}else{g.bypassed=u}t[g.name]=g}else{if(p){u.bypassed=g}else{t[g.name]=g}}return true};a.styfn.applyProperty=function(f,d,e){var c=this.parse(d,e);if(!c){return false}return this.applyParsedProperty(f,c)};a.styfn.apply=function(m){for(var d=0;
d<m.length;d++){var l=m[d];for(var g=0;g<this.length;g++){var e=this[g];var h=e.selector&&e.selector.filter(l).length>0;var k=e.properties;if(h){for(var f=0;f<k.length;f++){var c=k[f];this.applyParsedProperty(l,c)}}}}};a.styfn.update=function(){var d=this._private.cy;var c=d.elements();c.updateStyle()};a.styfn.getRenderedStyle=function(l){var l=l[0];if(l){var c={};var e=l._private.style;var h=this._private.cy;var k=h.zoom();for(var j=0;j<a.style.properties.length;j++){var d=a.style.properties[j];
var g=e[d.name];if(g){var f=g.unitless?g.strValue:(g.pxValue*k)+"px";c[d.name]=f;c[a.util.dash2camel(d.name)]=f}}return c}};a.styfn.getRawStyle=function(g){var g=g[0];if(g){var d={};var f=g._private.style;for(var e=0;e<a.style.properties.length;e++){var h=a.style.properties[e];var c=f[h.name];if(c){d[h.name]=c.strValue;d[a.util.dash2camel(h.name)]=c.strValue}}return d}};a.styfn.getValueStyle=function(g){var d,f;if(a.is.element(g)){d={};f=g._private.style}else{d={};f=g}if(f){for(var e=0;e<a.style.properties.length;
e++){var j=a.style.properties[e];var c=f[j.name]||f[a.util.dash2camel(j.name)];if(c!==undefined&&!a.is.plainObject(c)){c=this.parse(j.name,c)}if(c){var h=c.value===undefined?c:c.value;d[j.name]=h;d[a.util.dash2camel(j.name)]=h}}}return d};a.styfn.updateFunctionalProperties=function(c){for(var f=0;f<c.length;f++){var k=c[f];var h=k._private.style;for(var e=0;e<a.style.properties.length;e++){var l=a.style.properties[e];var g=h[l.name];if(g&&g.mapping){var d=g.mapping;this.applyParsedProperty(k,d)}}}};
a.styfn.applyBypass=function(o,d,m){var l=[];if(d==="*"||d==="**"){if(m!==undefined){for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{if(a.is.string(d)){var k=this.parse(d,m,true);if(k){l.push(k)}}else{if(a.is.plainObject(d)){var e=d;for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var m=e[d];if(m===undefined){m=e[a.util.dash2camel(d)]}if(m!==undefined){var k=this.parse(d,m,true);
if(k){l.push(k)}}}}else{return false}}}if(l.length===0){return false}var h=false;for(var g=0;g<o.length;g++){var n=o[g];for(var f=0;f<l.length;f++){var c=l[f];h=this.applyParsedProperty(n,c)||h}}return h};a.styfn.removeAllBypasses=function(c){for(var g=0;g<a.style.properties.length;g++){var l=a.style.properties[g];var f=l.name;var k="";var d=this.parse(f,k,true);for(var e=0;e<c.length;e++){var h=c[e];this.applyParsedProperty(h,d)}}};a.styfn.calculateControlPoints=function(c){var p={};var u=false;
var j=c.length;for(var n=0;n<c.length;n++){var v=c[n];var t=v._private.style["curve-style"].strValue==="bundled";if(t){u=true;break}}var s=j%2!==0&&!u;for(var n=0;n<c.length;n++){var g=c[n];var k=g._private.data.id;var h=g.source();var o=g.target();var r=h.position();var l=o.position();var w={x:(r.x+l.x)/2,y:(r.y+l.y)/2};var d=g._private.style["control-point-step-size"].pxValue;var f=(j-1)*-d/2;if(h.id()==o.id()){c[n]._private.rscratch.isSelfEdge=true;g._private.rscratch.cp2ax=r.x;g._private.rscratch.cp2ay=r.y-1.3*d*(n/3+1);
g._private.rscratch.cp2cx=r.x-1.3*d*(n/3+1);g._private.rscratch.cp2cy=r.y;g._private.rscratch.selfEdgeMidX=(g._private.rscratch.cp2ax+g._private.rscratch.cp2cx)/2;g._private.rscratch.selfEdgeMidY=(g._private.rscratch.cp2ay+g._private.rscratch.cp2cy)/2;continue}var m=f+d*n;if(j%2==1&&n==Math.floor(j/2)){c[n]._private.rscratch.isStraightEdge=true;continue}c[n]._private.rscratch.isBezierEdge=true;var y={x:l.y-r.y,y:r.x-l.x};var x=Math.sqrt(y.x*y.x+y.y*y.y);if(h.id()>o.id()){x*=-1}y.x/=x;y.y/=x;c[n]._private.rscratch.cp2x=w.x+y.x*m;
c[n]._private.rscratch.cp2y=w.y+y.y*m}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core=function(b,d){for(var c in b){var e=b[c];a.Core.prototype[c]=e}};a.Core=function(f){if(!(this instanceof a.Core)){return new a.Core(f)}var g=this;var b=f.container;var d=a.getRegistrationForInstance(g,b);if(d){d.cy=this;d.domElement=b}else{d=a.registerInstance(g,b)}var e=d.readies;var c=f;c.layout=a.util.extend({name:typeof module==="undefined"?"grid":"null"},c.layout);c.renderer=a.util.extend({name:typeof module==="undefined"?"canvas":"null"},c.renderer);
this._private={ready:false,instanceId:null,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:true,panEnabled:true,zoom:a.is.number(c.zoom)?c.zoom:1,pan:{x:a.is.plainObject(c.pan)&&a.is.number(c.pan.x)?c.pan.x:0,y:a.is.plainObject(c.pan)&&a.is.number(c.pan.y)?c.pan.y:0,}};if(a.is.number(c.minZoom)&&a.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){this._private.minZoom=c.minZoom;this._private.maxZoom=c.maxZoom
}else{if(a.is.number(c.minZoom)&&c.maxZoom===undefined){this._private.minZoom=c.minZoom}else{if(a.is.number(c.maxZoom)&&c.minZoom===undefined){this._private.maxZoom=c.maxZoom}}}this._private.style=a.is.stylesheet(c.style)?c.style.generateStyle(this):new a.Style(g);g.initRenderer(c.renderer);g.load(c.elements,function(){g.startAnimationLoop();g._private.ready=true;for(var h=0;h<e.length;h++){var j=e[h];g.bind("ready",j)}d.readies=[];if(a.is.fn(c.ready)){g.bind("ready",c.ready)}g.trigger("ready")},c.done)
};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(c){var b=this._private.id2index[c];if(b!==undefined){return this._private.elements[b]}return new a.Collection(this)},addToPool:function(c){var g=this._private.elements;var j=this._private.id2index;for(var e=0;e<c.length;e++){var f=c[e];
var h=f._private.data.id;var d=j[h];var b=d!==undefined;if(!b){d=g.length;g.push(f);j[h]=d}}return this},removeFromPool:function(m){var b=this._private.elements;var e=this._private.id2index;for(var g=0;g<m.length;g++){var l=m[g];var c=l._private.data.id;var h=e[c];var k=h!==undefined;if(k){delete this._private.id2index[c];b.splice(h,1);for(var f=h;f<b.length;f++){var d=b[f]._private.data.id;e[d]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)
},json:function(c){var b={};var d=this;b.elements={};d.elements().each(function(e,f){var g=f.group();if(!b.elements[g]){b.elements[g]=[]}b.elements[g].push(f.json())});b.style=d.style();b.scratch=d.scratch();b.zoomEnabled=d._private.zoomEnabled;b.panEnabled=d._private.panEnabled;b.layout=d._private.options.layout;b.renderer=d._private.options.renderer;return b}})})(cytoscape);(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var u=d;var n=[];for(var h=0;h<u.length;
h++){var t=u[h];n.push(t.json())}c=new a.Collection(e,n)}else{if(a.is.array(d)){var n=d;c=new a.Collection(e,n)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var n=[];var o=["nodes","edges"];for(var h=0,p=o.length;h<p;h++){var r=o[h];var m=l[r];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var s=m[f];var k=a.util.extend({},s,{group:r});n.push(k)}}}c=new a.Collection(e,n)}else{var s=d;c=(new a.Element(e,s)).collection()}}}return c.filter(function(){return !this.removed()
})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);
i.trigger("done")});i.layout(i._private.options.layout)}if(b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=10;var l=false;var i=true;
g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(n){d(n);k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(p){var z=g._private.aniEles;for(var v=0;v<z.length;v++){var y=z[v];var w=y._private.animation.current;
var u=y._private.animation.queue;if(w.length===0){var n=u;var t=n.length>0?n.shift():null;if(t!=null){t.callTime=+new Date;w.push(t)}}var x=[];for(var s=0;s<w.length;s++){var r=w[s];e(y,r,p);if(w[s].done){x.push(r);w.splice(s,1);s--}}for(var s=0;s<x.length;s++){var r=x[s];var o=r.params.complete;if(a.is.fn(o)){o.apply(y,[p])}}}if(z.length>0){g.notify({type:"draw",collection:z})}for(var s=0;s<z.length;s++){var y=z[s];var u=y._private.animation.queue;var w=y._private.animation.current;var m=w.length>0||u.length>0;
if(!m){z.splice(s,1);s--}}}function e(D,w,s){var n=g.style();var A=w.properties;var v=w.params;var t=w.callTime;var z;if(w.duration===0){z=1}else{z=Math.min(1,(s-t)/w.duration)}if(A.delay==null){var y=w.startPosition;var r=A.position;var C=D._private.position;if(r){if(b(y.x,r.x)){C.x=h(y.x,r.x,z)}if(b(y.y,r.y)){C.y=h(y.y,r.y,z)}}if(A.css){var B=a.style.properties;for(var x=0;x<B.length;x++){var m=B[x].name;var u=A.css[m];if(u!==undefined){var p=w.startStyle[m];var o=h(p,u,z);n.applyBypass(D,m,o)}}}}if(a.is.fn(v.step)){v.step.apply(D,[s])
}if(z>=1){w.done=true}return z}function b(n,m){if(n==null||m==null){return false}if(a.is.number(n)&&a.is.number(m)){return true}else{if((n)&&(m)){return true}}return false}function h(o,p,v){if(a.is.number(o)&&a.is.number(p)){return o+(p-o)*v}else{if(a.is.number(o[0])&&a.is.number(p[0])){var t=o;var s=p;function n(y,r){var z=r-y;var x=y;return Math.round(v*z+x)}var m=n(t[0],s[0]);var u=n(t[1],s[1]);var w=n(t[2],s[2]);return a.util.tuple2hex([m,u,w])}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(b==null){b=this._private.options.layout}this.initLayout(b);c.trigger("layoutstart");this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");
return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;
if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;
var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");
if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style}})})(cytoscape);(function(a){a.fn.core({panningEnabled:function(b){if(b!==undefined){this._private.panEnabled=b?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(b){if(b!==undefined){this._private.zoomEnabled=b?true:false
}else{return this._private.zoomEnabled}return this},pan:function(){var c=arguments;var g=this._private.pan;var d,f,e,b,h;switch(c.length){case 0:return g;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(c[0])){d=c[0];return g[d]}else{if(a.is.plainObject(c[0])){e=c[0];b=e.x;h=e.y;if(a.is.number(b)){g.x=b}if(a.is.number(h)){g.y=h}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]=f}this.trigger("pan");
break;default:break}this.notify({type:"viewport"});return this},panBy:function(h){var c=arguments;var g=this._private.pan;var d,f,e,b,i;if(!this._private.panEnabled){return this}switch(c.length){case 1:if(a.is.plainObject(c[0])){e=c[0];b=e.x;i=e.y;if(a.is.number(b)){g.x+=b}if(a.is.number(i)){g.y+=i}this.trigger("pan")}break;case 2:d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]+=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(f,g){if(a.is.number(f)&&g===undefined){g=f;
f=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var i=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e;g=a.is.number(g)?g:0;if(!isNaN(b)&&!isNaN(c)){e=this._private.zoom=Math.min((b-2*g)/i.w,(c-2*g)/i.h);e=e>this._private.maxZoom?this._private.maxZoom:e;e=e<this._private.minZoom?this._private.minZoom:e;this._private.pan={x:(b-e*(i.x1+i.x2))/2,y:(c-e*(i.y1+i.y2))/2}}this.trigger("pan zoom");
this.notify({type:"viewport"});return this},minZoom:function(b){if(b===undefined){return this._private.minZoom}else{if(a.is.number(b)){this._private.minZoom=b}}return this},maxZoom:function(b){if(b===undefined){return this._private.maxZoom}else{if(a.is.number(b)){this._private.maxZoom=b}}return this},zoom:function(d){var j;var k;if(d===undefined){return this._private.zoom}else{if(a.is.number(d)){k=d;j={x:0,y:0}}else{if(a.is.plainObject(d)){k=d.level;if(d.renderedPosition){var l=d.renderedPosition;
var b=this._private.pan;var i=this._private.zoom;j={x:(l.x-b.x)/i,y:(l.y-b.y)/i}}else{if(d.position){j=d.position}}if(j&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(k)||!a.is.number(j.x)||!a.is.number(j.y)){return this}k=k>this._private.maxZoom?this._private.maxZoom:k;k=k<this._private.minZoom?this._private.minZoom:k;var g=this._private.pan;var h=this._private.zoom;var f=k;var e={x:-f/h*(j.x-g.x)+j.x,y:-f/h*(j.y-g.y)+j.y};this._private.zoom=k;
this._private.pan=e;var c=g.x!==e.x||g.y!==e.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(r){var p;if(!r||(a.is.elementOrCollection(r)&&r.length===0)){p=this.$()}else{if(a.is.string(r)){p=this.$(r)}else{if(a.is.elementOrCollection(r)){p=r}}}var v=Infinity;var u=-Infinity;var d=Infinity;var c=-Infinity;for(var s=0;s<p.length;s++){var l=p[s];if(l.isNode()){var f=l._private.position;var j=f.x;var g=f.y;var k=l.outerWidth();var e=k/2;var t=l.outerHeight();
var m=t/2;var o=j-e;var n=j+e;var b=g-m;var z=g+m;v=o<v?o:v;u=n>u?n:u;d=b<d?b:d;c=z>c?z:c}}return{x1:v,x2:u,y1:d,y2:c,w:u-v,h:c-d}},center:function(f){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var g=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e=this._private.zoom;this.pan({x:(b-e*(g.x1+g.x2))/2,y:(c-e*(g.y1+g.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this
}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])
}}return f}};b.Element=function(d,f,h){if(!(this instanceof b.Element)){return new b.Element(d,f,h)}var n=this;h=(h===undefined||h?true:false);if(d===undefined||f===undefined||!b.is.core(d)){b.util.error("An element must have a core reference and parameters set");return}if(f.group!=="nodes"&&f.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+f.group+"`");return}this.length=1;this[0]=this;this._private={cy:d,single:true,data:f.data||{},position:f.position||{},listeners:[],group:f.group,style:{},removed:true,selected:f.selected?true:false,selectable:f.selectable===undefined?true:(f.selectable?true:false),locked:f.locked?true:false,grabbed:false,grabbable:f.grabbable===undefined?true:(f.grabbable?true:false),classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};
if(f.renderedPosition){var o=f.renderedPosition;var j=d.pan();var m=d.zoom();this._private.position={x:(o.x-j.x)/m,y:(o.y-j.y)/m}}if(b.is.string(f.classes)){var e=f.classes.split(/\s+/);for(var g=0,c=e.length;g<c;g++){var k=e[g];if(!k||k===""){continue}n._private.classes[k]=true}}if(h===undefined||h){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");
return}var d={};var f=[];var o=false;if(!c){c=[]}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){o=true;var s=[];var j={};for(var n=0,g=c.length;n<g;n++){var p=c[n];if(p.data==null){p.data={}}var m=p.data;if(m.id==null){m.id=a.generate(h,p)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var r=new b.Element(h,p,false);s.push(r);j[m.id]=true}c=s}}for(var n=0,g=c.length;n<g;n++){var k=c[n];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var n=0,g=f.length;
n<g;n++){this[n]=f[n]}this.length=f.length;this._private={cy:h,ids:d};if(o){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(r){var p=this;var E=[];var e=p.cy();if(r===undefined){r=true}var n=[];var u=0;var d=0;for(var B=0,x=p.length;B<x;B++){var m=p[B];if(m.isNode()){n.unshift(m);u++}else{n.push(m);d++}}for(var B=0,x=n.length;B<x;B++){var m=n[B];if(!m.removed()){continue}var o=m._private;var F=o.data;if(F.id===undefined){F.id=a.generate(e,m)}else{if(b.is.emptyString(F.id)||!b.is.string(F.id)){continue
}else{if(e.getElementById(F.id).length!=0){continue}}}var s=F.id;if(m.isEdge()){var g=m;var t=["source","target"];var v=t.length;for(var y=0;y<v;y++){var c=t[y];var G=F[c];if(G==null||G===""){continue}else{if(e.getElementById(G).empty()){continue}}}var h=e.getElementById(F.source);var A=e.getElementById(F.target);h._private.edges.push(g);A._private.edges.push(g)}o.ids={};o.ids[F.id]=m;o.removed=false;e.addToPool(m);E.push(m)}for(var B=0;B<u;B++){var w=n[B];var F=w._private.data;var s=F.id;var z=w._private.data.parent;
var f=z!=null;if(f){var k=e.getElementById(z);if(k.empty()){delete F.parent}else{var C=false;var D=k;while(!D.empty()){if(w.same(D)){C=true;delete F.parent;break}D=D.parent()}if(!C){k[0]._private.children.push(w)}}}}E=new b.Collection(e,E);if(E.length>0){E.updateStyle(false);E.connectedNodes().updateStyle(r);if(r){E.rtrigger("add")}else{E.trigger("add")}}return p};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];return c&&!c._private.removed
};b.elesfn.remove=function(j){var s=this;var n=[];var d=[];var e={};var g=s._private.cy;if(j===undefined){j=true}function k(w){var l=w._private.edges;for(var v=0;v<l.length;v++){r(l[v])}}function u(w){var v=w._private.children;for(var l=0;l<v.length;l++){r(v[l])}}function r(i){var l=e[i.id()];if(l){return}else{e[i.id()]=true}if(i.isNode()){d.push(i);k(i);u(i)}else{d.unshift(i)}}for(var m=0,f=s.length;m<f;m++){var t=s[m];r(t)}function p(x,w){var i=x._private.edges;for(var l=0;l<i.length;l++){var v=i[l];
if(w===v){i.splice(l,1);break}}}for(var m=0;m<d.length;m++){var t=d[m];t._private.removed=true;g.removeFromPool(t);n.push(t);if(t.isEdge()){var c=t.source()[0];var h=t.target()[0];p(c,t);p(h,t)}}var o=new b.Collection(this.cy(),n);if(o.size()>0){if(j){this.cy().notify({type:"remove",collection:o})}o.trigger("remove")}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0}},clearQueue:function(){for(var b=0;b<this.length;
b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)}for(var h=0;h<this.length;
h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];if(h){g.duration=0}}if(f){c._private.animation.queue=[]
}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;if(!e){k.push(h)}}}new a.Collection(this._private.cy,k).updateStyle();c.trigger("class");return c},hasClass:function(b){var c=this[0];return c!=null&&c._private.classes[b]},toggleClass:function(h,g){var b=h.split(/\s+/);
var n=this;var e=[];for(var f=0,k=n.length;f<k;f++){var o=n[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=o._private.classes[m];var l=g||(g===undefined&&!d);if(l){o._private.classes[m]=true;if(!d){e.push(o)}}else{o._private.classes[m]=false;if(d){e.push(o)}}}}new a.Collection(this._private.cy,e).updateStyle();n.trigger("class");return n},removeClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];
if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}new a.Collection(c._private.cy,k).updateStyle();c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false}return this.intersect(b).length===this.length},anySame:function(b){b=this.cy().collection(b);
return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(a){a.fn.eles({updateStyle:function(b){var d=this._private.cy;var c=d.style();b=b||b===undefined?true:false;c.apply(this);if(b){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(b){var f=this._private.cy;var d=f.style();b=b||b===undefined?true:false;for(var c=0;c<this.length;c++){var e=this[c];
d.apply(e)}if(b){this.rtrigger("style")}else{this.trigger("style")}return this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),rscratch:a.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var b=this[0];
if(b){return b._private.data.id}},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(f){if(a.is.plainObject(f)){this.position(f)}else{if(a.is.fn(f)){var c=f;for(var b=0;b<this.length;b++){var d=this[b];var f=c.apply(d,[b,d]);var e=d._private.position;e.x=f.x;e.y=f.y}this.rtrigger("position")}}return this},renderedPosition:function(d){var c=this[0];
var h=this.cy();var b=h.zoom();var f=h.pan();if(c&&c.isNode()){var g=c._private.position;var e={x:g.x*b+f.x,y:g.y*b+f.y};if(d===undefined){return e}else{return e[d]}}},renderedCss:function(d){var c=this[0];if(c){var b=c.cy().style().getRenderedStyle(c);if(d===undefined){return b}else{return b[d]}}},css:function(b,f){var d=this.cy().style();if(a.is.plainObject(b)){var c=b;d.applyBypass(this,c);this.rtrigger("style")}else{if(a.is.string(b)){if(f===undefined){var e=this[0];if(e){return e._private.style[b].strValue
}else{return}}else{d.applyBypass(this,b,f);this.rtrigger("style")}}else{if(b===undefined){var e=this[0];if(e){return d.getRawStyle(e)}else{return}}}}return this},removeCss:function(){var d=this.cy().style();var b=this;for(var c=0;c<b.length;c++){var e=b[c];d.removeAllBypasses(e)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var f=this[0];if(f){if(f.css("visibility")!=="visible"){return false
}if(f.isNode()){var c=f.parents();for(var d=0;d<c.length;d++){var e=c[d];var b=e.css("visibility");if(b!=="visible"){return false}}return true}else{if(f.isEdge()){var g=f.source();var h=f.target();return g.visible()&&h.visible()}}}},hidden:function(){var b=this[0];if(b){return !this.visible()}},width:function(){var b=this[0];if(b){return this._private.style.width.pxValue}},outerWidth:function(){var e=this[0];if(e){var d=this._private.style;var c=d.width.pxValue;var b=d["border-width"]?d["border-width"].pxValue:0;
return c+b}},renderedWidth:function(){var c=this[0];if(c){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var c=this[0];if(c){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var b=this[0];if(b&&b.isNode()){return this._private.style.height.pxValue}},outerHeight:function(){var e=this[0];if(e){var d=this._private.style;var b=d.height.pxValue;var c=d["border-width"]?d["border-width"].pxValue:0;return b+c}},renderedHeight:function(){var c=this[0];if(c){var b=this.height();
return b*this.cy().zoom()}},renderedOuterHeight:function(){var c=this[0];if(c){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){var g={x:e._private.position.x,y:e._private.position.y};var b=e.parents();for(var c=0;c<b.length;c++){var d=b[c];var f=d._private.position;g.x+=f.x;g.y+=f.y}return g}},renderedOffset:function(){var c=this[0];if(c&&c.isNode()){var e=this.offset();var f=this.cy();var b=f.zoom();var d=f.pan();return{x:e.x*b+d.x,y:e.y*b+d.y}
}}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1}}),indegree:a(function(e,d){if(d.target().same(e)){return 1}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;
var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d}),minOutdegree:c("outdegree",function(e,d){return e<d}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();
for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()})});this.trigger(b,c);return this}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"
},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;c++){var e=this[c];var b=d.apply(e,[c,e]);if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;
if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;
f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});
a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)
}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)}},intersect:function(m){var o=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];
var l=this;var k=m;var n=this.length<m.length;var h=n?l._private.ids:k._private.ids;var g=n?k._private.ids:l._private.ids;for(var f in h){var p=g[f];if(p){e.push(p)}}return new b.Collection(i,e)},add:function(m){var n=this;var g=this._private.cy;if(!m){return this}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true}}for(var k=0;k<n.length;k++){var j=n[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)
}});b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var k=f[p];var h=k.connectedEdges();for(var o=0;o<h.length;o++){var g=h[o];var n=g.connectedNodes().not(k);if(n.length>0){e.push(n[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});
function d(e){return function(f){var h=[];var g=this.edges();var n=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=n.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(n,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(r){var f=[];var j=this._private.cy;var g=e||{};if(b.is.string(r)){r=j.$(r)}var l=r.connectedEdges();var s=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var n;var o=h._private.data;
if(g.thisIs){var k=o[g.thisIs];n=s[k]}else{n=s[o.source]||s[o.target]}if(n){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var o=0;o<f.length;o++){var h=f[o];var n=h._private.edges;for(var m=0;m<n.length;m++){var g=n[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])
}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var o=h===g;if(o){return l}var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var k=n||f;if(k){l++}}}},parallelSize:function(){var g=this[0];
if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=n||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(A){var l=this._private.cy;var u=[];var k=this.edges();var v=f;for(var B=0;B<k.length;
B++){var t=k[B];var C=t.source()[0];var r=C.id();var y=t.target()[0];var n=y.id();var x=C._private.edges;for(var z=0;z<x.length;z++){var s=x[z];var g=s._private.data;var m=g.target;var o=g.source;var h=m===n&&o===r;var w=r===m&&n===o;if((v.codirected&&h)||(!v.codirected&&(h||w))){u.push(s)}}}return new b.Collection(l,u).filter(A)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);if(h.size()>0){f.push(h)
}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},descendants:function(e){var f=[];function g(h){for(var j=0;
j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined
}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);
self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";
var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"
}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})
}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})
}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `%s`",selector);
return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);
break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break
}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$.error("When adjusting references for the selector `%s`, neither parent nor ancestor was found");break}}}self[j]=query.subject
}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[j].group,onlyThisGroup,selector);return}self[j].group=onlyThisGroup}}}else{$.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};
$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();
break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();
break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(d){var h=function(){return Date.now()};var e={};var g={};var a=b.prototype;function b(j){this.data={select:[0,0,0,0,0],renderer:this,cy:j.cy,container:j.cy.container(),canvases:[null,null,null,null,null,[],[],[],[],[],false,false,false,false,false],banvases:[null,null],};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:false,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};
this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.init();for(var k=0;k<5;k++){this.data.canvases[k]=document.createElement("canvas");this.data.canvases[k].style.position="absolute";this.data.canvases[k].id="layer"+k;this.data.canvases[k].style.zIndex=String(-k);this.data.canvases[k].style.visibility="hidden";this.data.container.appendChild(this.data.canvases[k])}for(var k=0;k<2;k++){this.data.banvases[k]=document.createElement("canvas");this.data.banvases[k].style.position="absolute";
this.data.banvases[k].id="buffr"+k;this.data.banvases[k].style.zIndex=String(-k);this.data.banvases[k].style.visibility="visible";this.data.container.appendChild(this.data.banvases[k])}}b.prototype.notify=function(i){if(i.type=="add"||i.type=="remove"){this.updateNodesCache();this.updateEdgesCache()}if(i.type=="load"){this.load()}if(i.type=="viewport"){this.data.canvases[10+0]=true;this.data.canvases[5+0].push("viewchange");this.data.canvases[10+2]=true;this.data.canvases[5+2].push("viewchange");
this.data.canvases[10+4]=true;this.data.canvases[5+4].push("viewchange")}this.data.canvases[10+2]=true;this.data.canvases[5+2].push("x");this.data.canvases[10+4]=true;this.data.canvases[5+4].push("x");this.redraws++;this.redraw()};b.prototype.load=function(){var i=this;i.data.container.addEventListener("mousedown",function(u){i.hoverData.capture=true;var o=i.data.cy;var w=i.projectIntoViewport(u.pageX,u.pageY);var x=i.data.select;var t=i.findNearestElement(w[0],w[1]);var y=i.hoverData.down;var v=i.dragData.possibleDragElements;
if(u.button==0){if(t&&t._private.grabbable){if(t._private.group=="nodes"&&t._private.selected==false){t._private.grabbed=true;t.trigger(new d.Event(u,{type:"grab"}));var n=new d.Event(u,{type:"unselect"});var m=new d.Event(u,{type:"free"});for(var s=0;s<v.length;s++){var p=v[s];var z=false;if(p._private.selected||p._private.grabbed){z=true}if(p._private.selected){p._private.selected=false;p.trigger(n)}if(p._private.grabbed){p._private.grabbed=false;p.trigger(m)}if(z){p.updateStyle(false)}}i.dragData.possibleDragElements=v=[];
v.push(t);for(var s=0;s<t._private.edges.length;s++){t._private.edges[s]._private.grabbed=true}}if(t._private.group=="nodes"&&t._private.selected==true){var k=new d.Event(u,{type:"grab"});for(var s=0;s<v.length;s++){v[s]._private.grabbed=true;var l=v[s]._private.edges;for(var r=0;r<l.length;r++){l[r]._private.grabbed=true}v[s].trigger(k)}}i.data.canvases[10+2]=true;i.data.canvases[5+2].push("Single node moved to drag layer");i.data.canvases[10+4]=true;i.data.canvases[5+4].push("Single node moved to drag layer")
}if(t){t.trigger(new d.Event(u,{type:"mousedown"}))}i.hoverData.down=t;i.hoverData.downTime=(new Date()).getTime();if(t==null){x[4]=1}}else{if(u.button==1){i.hoverData.dragging=true;i.hoverData.initialPan=[o.pan().x,o.pan().y]}}x[0]=x[2]=w[0];x[1]=x[3]=w[1];i.redraw()},false);window.addEventListener("mousemove",function(s){var m=i.data.cy;var u=i.projectIntoViewport(s.pageX,s.pageY);var v=i.data.select;var r=i.findNearestElement(u[0],u[1]);var x=i.hoverData.last;var w=i.hoverData.down;var y=[u[0]-v[2],u[1]-v[3]];
var l=i.getCachedNodes();var n=i.getCachedEdges();var t=i.dragData.possibleDragElements;var A=i.hoverData.capture;if(!A){var z=i.findContainerPageCoords();if(s.pageX>z[0]&&s.pageX<z[0]+i.data.container.clientWidth&&s.pageY>z[1]&&s.pageY<z[1]+i.data.container.clientHeight){}else{return}}if(i.hoverData.dragging){m.panBy({x:y[0]*m.zoom(),y:y[1]*m.zoom()});u=i.projectIntoViewport(s.pageX,s.pageY);var k=new d.Event(s,{type:"mousemove"});if(r!=null){r.trigger(k)}else{if(r==null){m.trigger(k)}}}else{if(v[4]==1&&w==null&&(new Date()).getTime()-i.hoverData.downTime>200&&(Math.abs(v[3]-v[1])+Math.abs(v[2]-v[0])<4)){i.hoverData.dragging=true;
v[4]=0}else{if(r!=x){if(x){x.trigger(new d.Event(s,{type:"mouseout"}))}if(r){r.trigger(new d.Event(s,{type:"mouseover"}))}i.hoverData.last=r}if(w){var p=new d.Event(s,{type:"position"});for(var o=0;o<t.length;o++){if(!t[o]._private.locked&&t[o]._private.group=="nodes"){t[o]._private.position.x+=y[0];t[o]._private.position.y+=y[1];t[o].trigger(p)}}i.data.canvases[10+2]=true;i.data.canvases[5+2].push("Nodes dragged")}if(r){r.trigger(new d.Event(s,{type:"mousemove"}))}i.data.canvases[10+0]=true;i.data.canvases[5+0].push("Mouse moved, redraw selection box")
}}v[2]=u[0];v[3]=u[1];i.redraw()},false);window.addEventListener("mouseup",function(B){var w=i.hoverData.capture;if(!w){return}i.hoverData.capture=false;var l=i.data.cy;var p=i.projectIntoViewport(B.pageX,B.pageY);var u=i.data.select;var C=i.findNearestElement(p[0],p[1]);var v=i.getCachedNodes();var k=i.getCachedEdges();var o=i.dragData.possibleDragElements;var s=i.hoverData.down;if(C==null||C!=s||!C.selected()){var n=new d.Event(B,{type:"unselect"});for(var z=0;z<o.length;z++){if(o[z]._private.selected){o[z]._private.selected=false;
o[z].trigger(n);o[z].updateStyle(false)}}if(o.length>0){i.data.canvases[10+4]=true;i.data.canvases[5+4].push("De-select")}o=i.dragData.possibleDragElements=[]}if(Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)==0){var D=new d.Event(B,{type:"click"});if(C!=null){C.trigger(D)}else{if(C==null){l.trigger(D)}}}var m=new d.Event(B,{type:"mouseup"});if(C!=null){C.trigger(m)}else{if(C==null){l.trigger(m)}}if(C==s&&(Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)<7)){if(C!=null&&C._private.selectable&&C._private.selected==false){C._private.selected=true;
C.trigger(new d.Event(B,{type:"select"}));C.updateStyle(false);o.push(C);i.data.canvases[10+4]=true;i.data.canvases[5+4].push("sglslct")}}else{if(C==s){if(C!=null&&C._private.grabbed){var A=new d.Event(B,{type:"free"});C._private.grabbed=false;C.trigger(A);var t=C._private.edges;for(var y=0;y<t.length;y++){t[y]._private.grabbed=false}}}}if(Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)>7&&u[4]){var r=i.getAllInBox(u[0],u[1],u[2],u[3]);var x=new d.Event(B,{type:"select"});for(var z=0;z<r.length;z++){if(r[z]._private.selectable){r[z]._private.selected=true;
r[z].trigger(x);r[z].updateStyle(false);o.push(r[z])}}if(r.length>0){i.data.canvases[10+4]=true;i.data.canvases[5+4].push("Selection")}}i.hoverData.dragging=false;if(!u[4]){var A=new d.Event(B,{type:"free"});for(var z=0;z<o.length;z++){o[z]._private.grabbed=false;if(o[z]._private.group=="nodes"){var t=o[z]._private.edges;for(var y=0;y<t.length;y++){t[y]._private.grabbed=false}}o[z].trigger(A)}i.data.canvases[10+2]=true;i.data.canvases[5+2].push("Node/nodes back from drag");i.data.canvases[10+4]=true;
i.data.canvases[5+4].push("Node/nodes back from drag")}u[4]=0;i.hoverData.down=null;i.data.canvases[10+0]=true;i.data.canvases[5+0].push("Mouse up, selection box gone");i.redraw()},false);var j=function(m){var o=i.data.cy;var n=i.projectIntoViewport(m.pageX,m.pageY);var l=[n[0]*o.zoom()+o.pan().x,n[1]*o.zoom()+o.pan().y];if(i.zoomData.freeToZoom){m.preventDefault();var k=m.wheelDeltaY/1000||m.detail/-8.4;o.zoom({level:o.zoom()*(1+k),position:{x:l[0],y:l[1]}})}};i.data.container.addEventListener("mousewheel",j,false);
i.data.container.addEventListener("DOMMouseScroll",j,false);i.data.container.addEventListener("mousemove",function(k){if(i.zoomData.lastPointerX&&i.zoomData.lastPointerX!=k.pageX&&!i.zoomData.freeToZoom){i.zoomData.freeToZoom=true}i.zoomData.lastPointerX=k.pageX},false);i.data.container.addEventListener("mouseout",function(k){i.zoomData.freeToZoom=false;i.zoomData.lastPointerX=null},false);i.data.container.addEventListener("touchstart",function(t){t.preventDefault();i.touchData.capture=true;var m=i.data.cy;
var k=i.getCachedNodes();var p=i.getCachedEdges();var l=i.touchData.now;var n=i.touchData.earlier;if(t.touches[0]){var u=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);l[0]=u[0];l[1]=u[1]}if(t.touches[1]){var u=i.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);l[2]=u[0];l[3]=u[1]}if(t.touches[2]){var u=i.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);l[4]=u[0];l[5]=u[1]}if(t.touches[2]){}else{if(t.touches[1]){}else{if(t.touches[0]){var s=i.findNearestElement(l[0],l[1]);
if(s!=null){i.touchData.start=s;if(s._private.group=="nodes"){s._private.grabbed=true;s.trigger(new d.Event(t,{type:"grab"}));i.data.canvases[10+2]=true;i.data.canvases[5+2].push("touchdrag node start");i.data.canvases[10+4]=true;i.data.canvases[5+4].push("touchdrag node start");var r=s._private.edges;for(var o=0;o<r.length;o++){r[o]._private.grabbed=true}}s.trigger(new d.Event(t,{type:"touchstart"}))}else{if(s==null){m.trigger(new d.Event(t,{type:"touchstart"}))}}}}}for(var o=0;o<l.length;o++){n[o]=l[o]
}i.redraw()},true);window.addEventListener("touchmove",function(w){var A=i.touchData.capture;if(!A){return}w.preventDefault();var o=i.data.cy;var k=i.getCachedNodes();var s=i.getCachedEdges();var m=i.touchData.now;var p=i.touchData.earlier;if(w.touches[0]){var y=i.projectIntoViewport(w.touches[0].pageX,w.touches[0].pageY);m[0]=y[0];m[1]=y[1]}if(w.touches[1]){var y=i.projectIntoViewport(w.touches[1].pageX,w.touches[1].pageY);m[2]=y[0];m[3]=y[1]}if(w.touches[2]){var y=i.projectIntoViewport(w.touches[2].pageX,w.touches[2].pageY);
m[4]=y[0];m[5]=y[1]}var z=[];for(var r=0;r<m.length;r++){z[r]=m[r]-p[r]}if(w.touches[2]){}else{if(w.touches[1]){var v=[(z[0]+z[2])/2,(z[1]+z[3])/2];o.panBy({x:v[0]*o.zoom(),y:v[1]*o.zoom()});var t=Math.sqrt(Math.pow(p[2]-p[0],2)+Math.pow(p[3]-p[1],2));var n=Math.sqrt(Math.pow(m[2]-m[0],2)+Math.pow(m[3]-m[1],2));var x=n/t;if(x>1){x=(x-1)*1.5+1}else{x=1-(1-x)*1.5}o.zoom({level:o.zoom()*x,position:{x:(m[0]+m[2])/2,y:(m[1]+m[3])/2}});if(w.touches[0]){var y=i.projectIntoViewport(w.touches[0].pageX,w.touches[0].pageY);
m[0]=y[0];m[1]=y[1]}if(w.touches[1]){var y=i.projectIntoViewport(w.touches[1].pageX,w.touches[1].pageY);m[2]=y[0];m[3]=y[1]}if(w.touches[2]){var y=i.projectIntoViewport(w.touches[2].pageX,w.touches[2].pageY);m[4]=y[0];m[5]=y[1]}}else{if(w.touches[0]){var l=i.touchData.start;if(l!=null&&l._private.group=="nodes"){l._private.position.x+=z[0];l._private.position.y+=z[1];i.data.canvases[10+2]=true;i.data.canvases[5+2].push("touchdrag node");l.trigger(new d.Event(w,{type:"position"}))}if(l!=null){l.trigger(new d.Event(w,{type:"touchmove"}))
}if(l==null){var u=i.findNearestElement(m[0],m[1]);if(u!=null){u.trigger(new d.Event(w,{type:"touchmove"}))}if(u==null){o.trigger(new d.Event(w,{type:"touchmove"}))}}if(l==null){o.panBy({x:z[0]*o.zoom(),y:z[1]*o.zoom()});var y=i.projectIntoViewport(w.touches[0].pageX,w.touches[0].pageY);m[0]=y[0];m[1]=y[1]}}}}for(var r=0;r<m.length;r++){p[r]=m[r]}i.redraw()},true);window.addEventListener("touchend",function(u){var w=i.touchData.capture;if(!w){return}i.touchData.capture=false;u.preventDefault();var n=i.data.cy;
var k=i.getCachedNodes();var r=i.getCachedEdges();var m=i.touchData.now;var o=i.touchData.earlier;if(u.touches[0]){var v=i.projectIntoViewport(u.touches[0].pageX,u.touches[0].pageY);m[0]=v[0];m[1]=v[1]}if(u.touches[1]){var v=i.projectIntoViewport(u.touches[1].pageX,u.touches[1].pageY);m[2]=v[0];m[3]=v[1]}if(u.touches[2]){var v=i.projectIntoViewport(u.touches[2].pageX,u.touches[2].pageY);m[4]=v[0];m[5]=v[1]}if(u.touches[2]){}else{if(u.touches[1]){}else{if(u.touches[0]){}else{if(!u.touches[0]){var l=i.touchData.start;
if(l!=null){if(l._private.grabbed==true){l._private.grabbed=false;l.trigger(new d.Event(u,{type:"free"}))}var s=l._private.edges;for(var p=0;p<s.length;p++){s[p]._private.grabbed=false}i.data.canvases[10+2]=true;i.data.canvases[5+2].push("touchdrag node end");i.data.canvases[10+4]=true;i.data.canvases[5+4].push("touchdrag node end");l.trigger(new d.Event(u,{type:"touchend"}));i.touchData.start=null}else{var t=i.findNearestElement(m[0],m[1]);if(t!=null){t.trigger(new d.Event(u,{type:"touchend"}))}if(t==null){n.trigger(new d.Event(u,{type:"touchend"}))
}}}}}}for(var p=0;p<m.length;p++){o[p]=m[p]}i.redraw()},true)};b.prototype.init=function(){};b.prototype.getCachedNodes=function(){var i=this.data;var j=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedNodes==undefined){i.cache.cachedNodes=j.nodes()}return i.cache.cachedNodes};b.prototype.updateNodesCache=function(){var i=this.data;var j=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedNodes=j.nodes()};b.prototype.getCachedEdges=function(){var i=this.data;var j=this.data.cy;
if(i.cache==undefined){i.cache={}}if(i.cache.cachedEdges==undefined){i.cache.cachedEdges=j.edges()}return i.cache.cachedEdges};b.prototype.updateEdgesCache=function(){var i=this.data;var j=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedEdges=j.edges()};b.prototype.projectIntoViewport=function(l,j){var i,r;var m=0;var k=0;var p;p=this.data.container;var o=false;while(p!=null){if(typeof(p.offsetLeft)=="number"){m+=p.offsetLeft;k+=p.offsetTop;if(p==document.body||p==document.header){o=true
}if(!o){m-=p.scrollLeft;k-=p.scrollTop}}p=p.parentNode}i=l-m;r=j-k;i-=this.data.cy.pan().x;r-=this.data.cy.pan().y;i/=this.data.cy.zoom();r/=this.data.cy.zoom();return[i,r]};b.prototype.findContainerPageCoords=function(){var i,o;var k=0;var j=0;var m;m=this.data.container;var l=false;while(m!=null){if(typeof(m.offsetLeft)=="number"){k+=m.offsetLeft;j+=m.offsetTop;if(m==document.body||m==document.header){l=true}if(!l){k-=m.scrollLeft;j-=m.scrollTop}}m=m.parentNode}return[k,j]};b.prototype.findNearestElement=function(j,p){var o=this.data;
var l=this.getCachedNodes();var k=this.getCachedEdges();var n=[];for(var m=0;m<l.length;m++){if(g[l[m]._private.style.shape.value].checkPointRough(j,p,l[m]._private.style["border-width"].value,l[m]._private.style.width.value,l[m]._private.style.height.value,l[m]._private.position.x,l[m]._private.position.y)&&g[l[m]._private.style.shape.value].checkPoint(j,p,l[m]._private.style["border-width"].value,l[m]._private.style.width.value/2,l[m]._private.style.height.value/2,l[m]._private.position.x,l[m]._private.position.y)){n.push(l[m])
}}for(var m=0;m<k.length;m++){if(k[m]._private.rscratch.isSelfEdge){if((this.inBezierVicinity(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.cp2ax,k[m]._private.rscratch.cp2ay,k[m]._private.rscratch.selfEdgeMidX,k[m]._private.rscratch.selfEdgeMidY,Math.pow(k[m]._private.style.width.value/2,2))&&(Math.pow(k[m]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.cp2ax,k[m]._private.rscratch.cp2ay,k[m]._private.rscratch.selfEdgeMidX,k[m]._private.rscratch.selfEdgeMidY)))||(this.inBezierVicinity(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.cp2cx,k[m]._private.rscratch.cp2cy,k[m]._private.rscratch.selfEdgeMidX,k[m]._private.rscratch.selfEdgeMidY,Math.pow(k[m]._private.style.width.value/2,2))&&(Math.pow(k[m]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.cp2cx,k[m]._private.rscratch.cp2cy,k[m]._private.rscratch.selfEdgeMidX,k[m]._private.rscratch.selfEdgeMidY)))){n.push(k[m])
}}else{if(k[m]._private.rscratch.isStraightEdge){if(Math.pow(k[m]._private.style.width.value/2,2)>this.sqDistanceToFiniteLine(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.endX,k[m]._private.rscratch.endY)){n.push(k[m])}}else{if(k[m]._private.rscratch.isBezierEdge){if(this.inBezierVicinity(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.cp2x,k[m]._private.cp2y,k[m]._private.rscratch.endX,k[m]._private.rscratch.endY,Math.pow(k[m]._private.style.width.value/2,2))&&(Math.pow(k[m]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(j,p,k[m]._private.rscratch.startX,k[m]._private.rscratch.startY,k[m]._private.rscratch.cp2x,k[m]._private.rscratch.cp2y,k[m]._private.rscratch.endX,k[m]._private.rscratch.endY))){n.push(k[m])
}}}}if(!n.length||n[n.length-1]!=k[m]){if((e[k[m]._private.style["source-arrow-shape"].value].roughCollide(j,p,k[m]._private.rscratch.arrowStartX,k[m]._private.rscratch.arrowStartY,this.getArrowWidth(k[m]._private.style.width.value),this.getArrowHeight(k[m]._private.style.width.value),[k[m]._private.rscratch.arrowStartX-k[m].source()[0]._private.position.x,k[m]._private.rscratch.arrowStartY-k[m].source()[0]._private.position.y],0)&&e[k[m]._private.style["source-arrow-shape"].value].collide(j,p,k[m]._private.rscratch.arrowStartX,k[m]._private.rscratch.arrowStartY,this.getArrowWidth(k[m]._private.style.width.value),this.getArrowHeight(k[m]._private.style.width.value),[k[m]._private.rscratch.arrowStartX-k[m].source()[0]._private.position.x,k[m]._private.rscratch.arrowStartY-k[m].source()[0]._private.position.y],0))||(e[k[m]._private.style["target-arrow-shape"].value].roughCollide(j,p,k[m]._private.rscratch.arrowEndX,k[m]._private.rscratch.arrowEndY,this.getArrowWidth(k[m]._private.style.width.value),this.getArrowHeight(k[m]._private.style.width.value),[k[m]._private.rscratch.arrowEndX-k[m].target()[0]._private.position.x,k[m]._private.rscratch.arrowEndY-k[m].target()[0]._private.position.y],0)&&e[k[m]._private.style["target-arrow-shape"].value].collide(j,p,k[m]._private.rscratch.arrowEndX,k[m]._private.rscratch.arrowEndY,this.getArrowWidth(k[m]._private.style.width.value),this.getArrowHeight(k[m]._private.style.width.value),[k[m]._private.rscratch.arrowEndX-k[m].target()[0]._private.position.x,k[m]._private.rscratch.arrowEndY-k[m].target()[0]._private.position.y],0))){n.push(k[m])
}}}n.sort(function(r,i){var t=i._private.style["z-index"].value-r._private.style["z-index"].value;var s=i._private.data.id.localeCompare(r._private.data.id);var u=(function(w,v){if(w.isEdge()&&v.isNode()){return 1}else{if(w.isNode()&&v.isEdge()){return -1}}return 0})(r,i);return t||u||s});if(n.length>0){return n[0]}else{return null}};b.prototype.getAllInBox=function(l,w,j,v){var r=this.data;var k=this.getCachedNodes();var o=this.getCachedEdges();var s=[];var u=Math.min(l,j);var n=Math.max(l,j);var x=Math.min(w,v);
var t=Math.max(w,v);l=u;j=n;w=x;v=t;var m;for(var p=0;p<k.length;p++){if(g[k[p]._private.style.shape.value].intersectBox(l,w,j,v,k[p]._private.style.width.value,k[p]._private.style.height.value,k[p]._private.position.x,k[p]._private.position.y,k[p]._private.style["border-width"].value/2)){s.push(k[p])}}for(var p=0;p<o.length;p++){if(o[p]._private.rscratch.isSelfEdge){if((m=this.boxInBezierVicinity(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2ax,o[p]._private.rscratch.cp2ay,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value))&&(m==2||(m==1&&this.checkBezierCrossesBox(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2ax,o[p]._private.rscratch.cp2ay,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value)))||(m=this.boxInBezierVicinity(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2cx,o[p]._private.rscratch.cp2cy,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value))&&(m==2||(m==1&&this.checkBezierCrossesBox(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2cx,o[p]._private.rscratch.cp2cy,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value)))){s.push(o[p])
}}if(o[p]._private.rscratch.isBezierEdge&&(m=this.boxInBezierVicinity(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2x,o[p]._private.rscratch.cp2y,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value))&&(m==2||(m==1&&this.checkBezierCrossesBox(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.cp2x,o[p]._private.rscratch.cp2y,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value)))){s.push(o[p])
}if(o[p]._private.rscratch.isStraightEdge&&(m=this.boxInBezierVicinity(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.startX*0.5+o[p]._private.rscratch.endX*0.5,o[p]._private.rscratch.startY*0.5+o[p]._private.rscratch.endY*0.5,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value))&&(m==2||(m==1&&this.checkStraightEdgeCrossesBox(l,w,j,v,o[p]._private.rscratch.startX,o[p]._private.rscratch.startY,o[p]._private.rscratch.endX,o[p]._private.rscratch.endY,o[p]._private.style.width.value)))){s.push(o[p])
}}return s};b.prototype.matchCanvasSize=function(k){var o=this.data;var n=k.clientWidth;var j=k.clientHeight;var l;for(var m=0;m<5;m++){l=o.canvases[m];if(l.width!==n||l.height!==j){l.width=n;l.height=j}}for(var m=0;m<2;m++){l=o.banvases[m];if(l.width!==n||l.height!==j){l.width=n;l.height=j}}};b.prototype.redraw=function(){var m=this.data.cy;var o=this.data;var k=this.getCachedNodes();var n=this.getCachedEdges();this.matchCanvasSize(o.container);var j=k.add(n).toArray();if(o.canvases[10+2]||o.canvases[10+4]){this.findEdgeControlPoints(n);
j.sort(function(v,u){var t=v._private.style["z-index"].value-u._private.style["z-index"].value;if(t==0){if(v._private.group=="nodes"&&u._private.group=="edges"){return 1}else{if(v._private.group=="edges"&&u._private.group=="nodes"){return -1}}}return 0})}if(o.canvases[10+4]){var l=o.canvases[4].getContext("2d");l.setTransform(1,0,0,1,0,0);l.clearRect(0,0,l.canvas.width,l.canvas.height);l.translate(m.pan().x,m.pan().y);l.scale(m.zoom(),m.zoom());var p;for(var r=0;r<j.length;r++){p=j[r];if(!p._private.grabbed){if(p._private.group=="nodes"){this.drawNode(l,p)
}else{if(p._private.group=="edges"){this.drawEdge(l,p)}}}}for(var r=0;r<j.length;r++){p=j[r];if(!p._private.grabbed){if(p._private.group=="nodes"){this.drawNodeText(l,p)}else{if(p._private.group=="edges"){this.drawEdgeText(l,p)}}}}o.canvases[10+4]=false;o.canvases[5+4]=[]}if(o.canvases[10+2]){var l=o.canvases[2].getContext("2d");l.setTransform(1,0,0,1,0,0);l.clearRect(0,0,l.canvas.width,l.canvas.height);l.translate(m.pan().x,m.pan().y);l.scale(m.zoom(),m.zoom());var p;for(var r=0;r<j.length;r++){p=j[r];
if(p._private.grabbed){if(p._private.group=="nodes"){this.drawNode(l,p)}else{if(p._private.group=="edges"){this.drawEdge(l,p)}}}}for(var r=0;r<j.length;r++){p=j[r];if(p._private.grabbed){if(p._private.group=="nodes"){this.drawNodeText(l,p)}else{if(p._private.group=="edges"){this.drawEdgeText(l,p)}}}}o.canvases[10+2]=false;o.canvases[5+2]=[]}if(o.canvases[10+0]){var l=o.canvases[0].getContext("2d");l.setTransform(1,0,0,1,0,0);l.clearRect(0,0,l.canvas.width,l.canvas.height);l.translate(m.pan().x,m.pan().y);
l.scale(m.zoom(),m.zoom());if(o.select[4]==1){var s=m.style()._private.coreStyle;var i=s["selection-box-border-width"].value/o.cy.zoom();l.lineWidth=i;l.fillStyle="rgba("+s["selection-box-color"].value[0]+","+s["selection-box-color"].value[1]+","+s["selection-box-color"].value[2]+","+s["selection-box-opacity"].value+")";l.fillRect(o.select[0],o.select[1],o.select[2]-o.select[0],o.select[3]-o.select[1]);if(i>0){l.strokeStyle="rgba("+s["selection-box-border-color"].value[0]+","+s["selection-box-border-color"].value[1]+","+s["selection-box-border-color"].value[2]+","+s["selection-box-opacity"].value+")";
l.strokeRect(o.select[0],o.select[1],o.select[2]-o.select[0],o.select[3]-o.select[1])}}o.canvases[10+0]=false;o.canvases[5+0]=[]}var l;l=o.banvases[1].getContext("2d");l.globalCompositeOperation="copy";l.drawImage(o.canvases[4],0,0);l.globalCompositeOperation="source-over";l.drawImage(o.canvases[2],0,0);l.drawImage(o.canvases[0],0,0);l=o.banvases[0].getContext("2d");l.globalCompositeOperation="copy";l.drawImage(o.banvases[1],0,0)};b.prototype.drawEdge=function(m,n){var l,j;l=n.source()[0];j=n.target()[0];
if(n._private.style.visibility.value!="visible"||l._private.style.visibility.value!="visible"||j._private.style.visibility.value!="visible"){return}m.strokeStyle="rgba("+n._private.style["line-color"].value[0]+","+n._private.style["line-color"].value[1]+","+n._private.style["line-color"].value[2]+","+n._private.style.opacity.value+")";if(n._private.style.width.value<=0){return}m.lineWidth=n._private.style.width.value;this.findEndpoints(n);if(n._private.rscratch.isSelfEdge){m.beginPath();m.moveTo(n._private.rscratch.startX,n._private.rscratch.startY);
m.quadraticCurveTo(n._private.rscratch.cp2ax,n._private.rscratch.cp2ay,n._private.rscratch.selfEdgeMidX,n._private.rscratch.selfEdgeMidY);m.moveTo(n._private.rscratch.selfEdgeMidX,n._private.rscratch.selfEdgeMidY);m.quadraticCurveTo(n._private.rscratch.cp2cx,n._private.rscratch.cp2cy,n._private.rscratch.endX,n._private.rscratch.endY);m.stroke()}else{if(n._private.rscratch.isStraightEdge){var k=j._private.position.x-l._private.position.x;var i=j._private.position.y-l._private.position.y;var p=n._private.rscratch.endX-n._private.rscratch.startX;
var o=n._private.rscratch.endY-n._private.rscratch.startY;if(k*p+i*o<0){n._private.rscratch.straightEdgeTooShort=true}else{m.beginPath();m.moveTo(n._private.rscratch.startX,n._private.rscratch.startY);m.lineTo(n._private.rscratch.endX,n._private.rscratch.endY);m.stroke();n._private.rscratch.straightEdgeTooShort=false}}else{m.beginPath();m.moveTo(n._private.rscratch.startX,n._private.rscratch.startY);m.quadraticCurveTo(n._private.rscratch.cp2x,n._private.rscratch.cp2y,n._private.rscratch.endX,n._private.rscratch.endY);
m.stroke()}}if(n._private.rscratch.noArrowPlacement!==true&&n._private.rscratch.startX!==undefined){this.drawArrowheads(m,n)}};b.prototype.drawEdgeText=function(k,n){if(n._private.style.visibility.value!="visible"){return}k.textAlign="center";k.textBaseline="middle";var j,i;var m,l;if(n._private.rscratch.isSelfEdge){m=n._private.rscratch.selfEdgeMidX;l=n._private.rscratch.selfEdgeMidY}else{if(n._private.rscratch.isStraightEdge){m=(n._private.rscratch.startX+n._private.rscratch.endX)/2;l=(n._private.rscratch.startY+n._private.rscratch.endY)/2
}else{if(n._private.rscratch.isBezierEdge){m=Math.pow(1-0.5,2)*n._private.rscratch.startX+2*(1-0.5)*0.5*n._private.rscratch.cp2x+(0.5*0.5)*n._private.rscratch.endX;l=Math.pow(1-0.5,2)*n._private.rscratch.startY+2*(1-0.5)*0.5*n._private.rscratch.cp2y+(0.5*0.5)*n._private.rscratch.endY}}}j=m;i=l;this.drawText(k,n,j,i)};b.prototype.drawNode=function(j,k){var i,l;if(k._private.style.visibility.value!="visible"){return}j.fillStyle="rgba("+k._private.style["background-color"].value[0]+","+k._private.style["background-color"].value[1]+","+k._private.style["background-color"].value[2]+","+(k._private.style["background-opacity"].value*k._private.style.opacity.value)+")";
j.strokeStyle="rgba("+k._private.style["border-color"].value[0]+","+k._private.style["border-color"].value[1]+","+k._private.style["border-color"].value[2]+","+(k._private.style["border-opacity"].value*k._private.style.opacity.value)+")";i=k._private.style.width.value;l=k._private.style.height.value;g[k._private.style.shape.value].draw(j,k,i,l);j.lineWidth=k._private.style["border-width"].value;if(k._private.style["border-width"].value>0){j.stroke()}};b.prototype.drawNodeText=function(m,o){if(o._private.style.visibility.value!="visible"){return
}var k,i;var j=o._private.style.width.value;var p=o._private.style.height.value;var n=o._private.style["text-halign"].strValue;if(n=="left"){m.textAlign="right";k=o._private.position.x-j/2}else{if(n=="right"){m.textAlign="left";k=o._private.position.x+j/2}else{if(n=="center"){m.textAlign="center";k=o._private.position.x}else{m.textAlign="center";k=o._private.position.x}}}var l=o._private.style["text-valign"].strValue;if(l=="top"){m.textBaseline="bottom";i=o._private.position.y-p/2}else{if(l=="bottom"){m.textBaseline="top";
i=o._private.position.y+p/2}else{if(l=="middle"||l=="center"){m.textBaseline="middle";i=o._private.position.y}else{m.textBaseline="middle";i=o._private.position.y}}}this.drawText(m,o,k,i)};b.prototype.drawText=function(i,m,o,n){var s=m._private.style["font-style"].strValue;var l=m._private.style["font-size"].strValue;var u=m._private.style["font-family"].strValue;var r=m._private.style["font-variant"].strValue;var j=m._private.style["font-weight"].strValue;i.font=s+" "+r+" "+j+" "+l+" "+u;var t=String(m._private.style.content.value);
var k=m._private.style["text-transform"].value;if(k=="none"){}else{if(k=="uppercase"){t=t.toUpperCase()}else{if(k=="lowercase"){t=t.toLowerCase()}}}i.fillStyle="rgba("+m._private.style.color.value[0]+","+m._private.style.color.value[1]+","+m._private.style.color.value[2]+","+(m._private.style["text-opacity"].value*m._private.style.opacity.value)+")";i.strokeStyle="rgba("+m._private.style["text-outline-color"].value[0]+","+m._private.style["text-outline-color"].value[1]+","+m._private.style["text-outline-color"].value[2]+","+(m._private.style["text-opacity"].value*m._private.style.opacity.value)+")";
if(t!=undefined){if(isNaN(o)){o=0}if(isNaN(n)){n=0}i.fillText(""+t,o,n)}var p=m._private.style["text-outline-width"].value;if(p>0){i.lineWidth=p;i.strokeText(t,o,n)}};b.prototype.findEdgeControlPoints=function(r){var x={};var o=this.data.cy;var u;for(var s=0;s<r.length;s++){u=r[s]._private.data.source>r[s]._private.data.target?r[s]._private.data.target+r[s]._private.data.source:r[s]._private.data.source+r[s]._private.data.target;if(x[u]==undefined){x[u]=[]}x[u].push(r[s])}var k,p;for(var u in x){k=o.getElementById(x[u][0]._private.data.source);
p=o.getElementById(x[u][0]._private.data.target);var w=(k._private.position.x+p._private.position.x)/2;var v=(k._private.position.y+p._private.position.y)/2;var l,j;if(x[u].length>1){l=p._private.position.y-k._private.position.y;j=k._private.position.x-p._private.position.x;var t=Math.sqrt(l*l+j*j);l/=t;j/=t}var m;for(var s=0;s<x[u].length;s++){m=x[u][s];if(k._private.data.id==p._private.data.id){var y=m._private.style["control-point-step-size"].pxValue;m._private.rscratch.isSelfEdge=true;m._private.rscratch.cp2ax=k._private.position.x;
m._private.rscratch.cp2ay=k._private.position.y-1.3*y*(s/3+1);m._private.rscratch.cp2cx=k._private.position.x-1.3*y*(s/3+1);m._private.rscratch.cp2cy=k._private.position.y;m._private.rscratch.selfEdgeMidX=(m._private.rscratch.cp2ax+m._private.rscratch.cp2cx)/2;m._private.rscratch.selfEdgeMidY=(m._private.rscratch.cp2ay+m._private.rscratch.cp2cy)/2}else{if(x[u].length%2==1&&s==Math.floor(x[u].length/2)){m._private.rscratch.isStraightEdge=true}else{var y=m._private.style["control-point-step-size"].value;
var n=(0.5-x[u].length/2+s)*y;m._private.rscratch.isBezierEdge=true;m._private.rscratch.cp2x=w+l*n;m._private.rscratch.cp2y=v+j*n}}}}return x};b.prototype.findEndpoints=function(l){var n;var i=l.source()[0];var s=l.target()[0];var x=Math.max(l.source()[0]._private.style.width.value,l.source()[0]._private.style.height.value);var m=Math.max(l.target()[0]._private.style.width.value,l.target()[0]._private.style.height.value);x=0;m/=2;var k=[l.source().position().x,l.source().position().y];var o=[l.target().position().x,l.target().position().y];
if(l._private.rscratch.isSelfEdge){var u=[l._private.rscratch.cp2cx,l._private.rscratch.cp2cy];n=g[s._private.style.shape.value].intersectLine(s,s._private.style.width.value,s._private.style.height.value,u[0],u[1]);var j=this.shortenIntersection(n,u,e[l._private.style["target-arrow-shape"].value].spacing(l));var t=this.shortenIntersection(n,u,e[l._private.style["target-arrow-shape"].value].gap(l));l._private.rscratch.endX=t[0];l._private.rscratch.endY=t[1];l._private.rscratch.arrowEndX=j[0];l._private.rscratch.arrowEndY=j[1];
var u=[l._private.rscratch.cp2ax,l._private.rscratch.cp2ay];n=g[i._private.style.shape.value].intersectLine(i,i._private.style.width.value,i._private.style.height.value,u[0],u[1]);var p=this.shortenIntersection(n,u,e[l._private.style["source-arrow-shape"].value].spacing(l));var r=this.shortenIntersection(n,u,e[l._private.style["source-arrow-shape"].value].gap(l));l._private.rscratch.startX=r[0];l._private.rscratch.startY=r[1];l._private.rscratch.arrowStartX=p[0];l._private.rscratch.arrowStartY=p[1]
}else{if(l._private.rscratch.isStraightEdge){n=g[s._private.style.shape.value].intersectLine(s,s._private.style.width.value,s._private.style.height.value,i.position().x,i.position().y);if(n.length==0){l._private.rscratch.noArrowPlacement=true}else{l._private.rscratch.noArrowPlacement=false}var j=this.shortenIntersection(n,[i.position().x,i.position().y],e[l._private.style["target-arrow-shape"].value].spacing(l));var t=this.shortenIntersection(n,[i.position().x,i.position().y],e[l._private.style["target-arrow-shape"].value].gap(l));
l._private.rscratch.endX=t[0];l._private.rscratch.endY=t[1];l._private.rscratch.arrowEndX=j[0];l._private.rscratch.arrowEndY=j[1];n=g[i._private.style.shape.value].intersectLine(i,i._private.style.width.value,i._private.style.height.value,s.position().x,s.position().y);if(n.length==0){l._private.rscratch.noArrowPlacement=true}else{l._private.rscratch.noArrowPlacement=false}var p=this.shortenIntersection(n,[s.position().x,s.position().y],e[l._private.style["source-arrow-shape"].value].spacing(l));
var r=this.shortenIntersection(n,[s.position().x,s.position().y],e[l._private.style["source-arrow-shape"].value].gap(l));l._private.rscratch.startX=r[0];l._private.rscratch.startY=r[1];l._private.rscratch.arrowStartX=p[0];l._private.rscratch.arrowStartY=p[1]}else{if(l._private.rscratch.isBezierEdge){var u=[l._private.rscratch.cp2x,l._private.rscratch.cp2y];var w=k[0]*0.25+o[0]*0.25+u[0]*0.5;var v=k[1]*0.25+o[1]*0.25+u[1]*0.5;n=g[s._private.style.shape.value].intersectLine(s,s._private.style.width.value,s._private.style.height.value,u[0],u[1]);
var j=this.shortenIntersection(n,u,e[l._private.style["target-arrow-shape"].value].spacing(l));var t=this.shortenIntersection(n,u,e[l._private.style["target-arrow-shape"].value].gap(l));l._private.rscratch.endX=t[0];l._private.rscratch.endY=t[1];l._private.rscratch.arrowEndX=j[0];l._private.rscratch.arrowEndY=j[1];n=g[i._private.style.shape.value].intersectLine(i,i._private.style.width.value,i._private.style.height.value,u[0],u[1]);var p=this.shortenIntersection(n,u,e[l._private.style["source-arrow-shape"].value].spacing(l));
var r=this.shortenIntersection(n,u,e[l._private.style["source-arrow-shape"].value].gap(l));l._private.rscratch.startX=r[0];l._private.rscratch.startY=r[1];l._private.rscratch.arrowStartX=p[0];l._private.rscratch.arrowStartY=p[1]}else{if(l._private.rscratch.isArcEdge){return}}}}};b.prototype.findEdges=function(n){var k=this.getCachedEdges();var m={};var j=[];for(var l=0;l<n.length;l++){m[n[l]._private.data.id]=n[l]}for(var l=0;l<k.length;l++){if(m[k[l]._private.data.source]||m[k[l]._private.data.target]){j.push(k[l])
}}return j};b.prototype.intersectLineEllipse=function(t,s,o,n,l,j){var k=o-t;var i=n-s;k/=l;i/=j;var p=Math.sqrt(k*k+i*i);var m=p-1;if(m<0){return[]}var r=m/p;return[(o-t)*r+t,(n-s)*r+s]};b.prototype.findCircleNearPoint=function(m,l,n,s,r){var j=s-m;var i=r-l;var k=Math.sqrt(j*j+i*i);var p=j/k;var o=i/k;return[m+p*n,l+o*n]};b.prototype.findMaxSqDistanceToOrigin=function(m){var j=0.000001;var l;for(var k=0;k<m.length/2;k++){l=m[k*2]*m[k*2]+m[k*2+1]*m[k*2+1];if(l>j){j=l}}return j};b.prototype.finiteLinesIntersect=function(n,v,l,t,j,s,w,p,u){var o=(w-j)*(v-s)-(p-s)*(n-j);
var r=(l-n)*(v-s)-(t-v)*(n-j);var m=(p-s)*(l-n)-(w-j)*(t-v);if(m!=0){var k=o/m;var i=r/m;if(0<=k&&k<=1&&0<=i&&i<=1){return[n+k*(l-n),v+k*(t-v)]}else{if(!u){return[]}else{return[n+k*(l-n),v+k*(t-v)]}}}else{if(o==0||r==0){if([n,l,w].sort()[1]==w){return[w,p]}if([n,l,j].sort()[1]==j){return[j,s]}if([j,w,l].sort()[1]==l){return[l,t]}return[]}else{return[]}}};b.prototype.boxIntersectEllipse=function(k,u,i,s,t,j,x,o,m){if(i<k){var l=k;k=i;i=l}if(s<u){var v=u;u=s;s=v}var r=[o-j/2-t,m];var w=[o+j/2+t,m];
var n=[o,m+x/2+t];var p=[o,m-x/2-t];if(i<r[0]){return false}if(k>w[0]){return false}if(s<p[1]){return false}if(u>n[1]){return false}if(k<=r[0]&&r[0]<=i&&u<=r[1]&&r[1]<=s){return true}if(k<=w[0]&&w[0]<=i&&u<=w[1]&&w[1]<=s){return true}if(k<=n[0]&&n[0]<=i&&u<=n[1]&&n[1]<=s){return true}if(k<=p[0]&&p[0]<=i&&u<=p[1]&&p[1]<=s){return true}k=(k-o)/(j+t);i=(i-o)/(j+t);u=(u-m)/(x+t);s=(s-m)/(x+t);if(k*k+u*u<=1){return true}if(i*i+u*u<=1){return true}if(i*i+s*s<=1){return true}if(k*k+s*s<=1){return true}return false
};b.prototype.boxIntersectPolygon=function(A,n,y,l,o,v,u,s,p,C,t){if(y<A){var z=A;A=y;y=z}if(l<n){var m=n;n=l;l=m}var r=new Array(o.length);var B=Math.asin(C[1]/(Math.sqrt(C[0]*C[0]+C[1]*C[1])));if(C[0]<0){B=B+Math.PI/2}else{B=-B-Math.PI/2}var k=Math.cos(-B);var j=Math.sin(-B);for(var x=0;x<r.length/2;x++){r[x*2]=v*(o[x*2]*k-o[x*2+1]*j);r[x*2+1]=u*(o[x*2+1]*k+o[x*2]*j);r[x*2]+=s;r[x*2+1]+=p}var w;if(t>0){var D=renderer.expandPolygon(r,-t);w=renderer.joinLines(D)}else{w=r}for(var x=0;x<r.length/2;
x++){if(A<=r[x*2]&&r[x*2]<=y){if(n<=r[x*2+1]&&r[x*2+1]<=l){return true}}}if(renderer.pointInsidePolygon(A,n,w,0,0,1,1,0,C)){return true}else{if(renderer.pointInsidePolygon(A,l,w,0,0,1,1,0,C)){return true}else{if(renderer.pointInsidePolygon(y,l,w,0,0,1,1,0,C)){return true}else{if(renderer.pointInsidePolygon(y,n,w,0,0,1,1,0,C)){return true}}}}return false};b.prototype.polygonIntersectLine=function(p,o,j,m,k,t,s,r){var D=[];var n;var l=new Array(j.length);for(var z=0;z<l.length/2;z++){l[z*2]=j[z*2]*t+m;
l[z*2+1]=j[z*2+1]*s+k}var w;if(r>0){var C=renderer.expandPolygon(l,-r);w=renderer.joinLines(C)}else{w=l}var v,u,B,A;for(var z=0;z<w.length/2;z++){v=w[z*2];u=w[z*2+1];if(z<w.length/2-1){B=w[(z+1)*2];A=w[(z+1)*2+1]}else{B=w[0];A=w[1]}n=this.finiteLinesIntersect(p,o,m,k,v,u,B,A);if(n.length!=0){D.push(n[0],n[1])}}return D};b.prototype.shortenIntersection=function(n,m,k){var i=[n[0]-m[0],n[1]-m[1]];var l=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var j=(l-k)/l;if(j<0){return[]}else{return[m[0]+j*i[0],m[1]+j*i[1]]
}};e.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(o,l,k,j,i,r,m,n){var p=e.arrow._points;return a.pointInsidePolygon(o,l,p,k,j,i,r,m,n)},roughCollide:function(j,p,o,l,k,i,n,m){if(typeof(e.arrow._farthestPointSqDistance)=="undefined"){e.arrow._farthestPointSqDistance=a.findMaxSqDistanceToOrigin(e.arrow._points)}return a.checkInBoundingCircle(j,p,e.arrow._farthestPointSqDistance,0,k,i,o,l)},draw:function(k){var l=e.arrow._points;for(var j=0;j<l.length/2;j++){k.lineTo(l[j*2],l[j*2+1])}},spacing:function(i){return 0
},gap:function(i){return i._private.style.width.value*2}};e.triangle=e.arrow;e.none={collide:function(j,p,o,l,k,i,n,m){return false},roughCollide:function(j,p,o,l,k,i,n,m){return false},draw:function(i){},spacing:function(i){return 0},gap:function(i){return 0}};e.circle={_baseRadius:0.15,collide:function(s,o,l,k,i,v,p,r){if(i!=v){var j=Math.asin(p[1]/(Math.sqrt(p[0]*p[0]+p[1]*p[1])));var u=Math.cos(-j);var n=Math.sin(-j);var m=[s*u-o*n,o*u+s*n];var t=(v+r)/(i+r);o/=t;k/=t;return(Math.pow(l-s,2)+Math.pow(k-o,2)<=Math.pow((i+r)*e.circle._baseRadius,2))
}else{return(Math.pow(l-s,2)+Math.pow(k-o,2)<=Math.pow((i+r)*e.circle._baseRadius,2))}},roughCollide:function(j,p,o,l,k,i,n,m){return true},draw:function(i){i.arc(0,0,e.circle._baseRadius,0,Math.PI*2,false)},spacing:function(i){return a.getArrowWidth(i._private.style.width.value)*e.circle._baseRadius},gap:function(i){return i._private.style.width.value*2}};e.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(o,l,k,j,i,r,m,n){var p=e.inhibitor._points;return a.pointInsidePolygon(o,l,p,k,j,i,r,m,n)
},roughCollide:function(j,p,o,l,k,i,n,m){if(typeof(e.inhibitor._farthestPointSqDistance)=="undefined"){e.inhibitor._farthestPointSqDistance=a.findMaxSqDistanceToOrigin(e.inhibitor._points)}return a.checkInBoundingCircle(j,p,e.inhibitor._farthestPointSqDistance,0,k,i,o,l)},draw:function(k){var l=e.inhibitor._points;for(var j=0;j<l.length/2;j++){k.lineTo(l[j*2],l[j*2+1])}},spacing:function(i){return 4},gap:function(i){return 4}};e.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(o,l,k,j,i,r,m,n){var p=e.square._points;
return a.pointInsidePolygon(o,l,p,k,j,i,r,m,n)},roughCollide:function(j,p,o,l,k,i,n,m){if(typeof(e.square._farthestPointSqDistance)=="undefined"){e.square._farthestPointSqDistance=a.findMaxSqDistanceToOrigin(e.square._points)}return a.checkInBoundingCircle(j,p,e.square._farthestPointSqDistance,0,k,i,o,l)},draw:function(k){var l=e.square._points;for(var j=0;j<l.length/2;j++){k.lineTo(l[j*2],l[j*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};e.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(o,l,k,j,i,r,m,n){var p=e.diamond._points;
return a.pointInsidePolygon(o,l,p,k,j,i,r,m,n)},roughCollide:function(j,p,o,l,k,i,n,m){if(typeof(e.diamond._farthestPointSqDistance)=="undefined"){e.diamond._farthestPointSqDistance=a.findMaxSqDistanceToOrigin(e.diamond._points)}return a.checkInBoundingCircle(j,p,e.diamond._farthestPointSqDistance,0,k,i,o,l)},draw:function(i){i.lineTo(-0.14,-0.14);i.lineTo(0,-0.28);i.lineTo(0.14,-0.14);i.lineTo(0,0)},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};e.tee=e.inhibitor;
b.prototype.getArrowWidth=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};b.prototype.getArrowHeight=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};b.prototype.drawArrowheads=function(m,p){var l,k;var j=p._private.rscratch.arrowStartX;var i=p._private.rscratch.arrowStartY;l=j-p.source().position().x;k=i-p.source().position().y;m.fillStyle="rgba("+p._private.style["source-arrow-color"].value[0]+","+p._private.style["source-arrow-color"].value[1]+","+p._private.style["source-arrow-color"].value[2]+","+p._private.style.opacity.value+")";
m.lineWidth=p._private.style.width.value;this.drawArrowShape(m,p._private.style["source-arrow-shape"].value,j,i,l,k);var o=p._private.rscratch.arrowEndX;var n=p._private.rscratch.arrowEndY;l=o-p.target().position().x;k=n-p.target().position().y;m.fillStyle="rgba("+p._private.style["target-arrow-color"].value[0]+","+p._private.style["target-arrow-color"].value[1]+","+p._private.style["target-arrow-color"].value[2]+","+p._private.style.opacity.value+")";m.lineWidth=p._private.style.width.value;this.drawArrowShape(m,p._private.style["target-arrow-shape"].value,o,n,l,k)
};b.prototype.drawArrowShape=function(n,j,i,p,m,k){var o=Math.asin(k/(Math.sqrt(m*m+k*k)));if(m<0){o=o+Math.PI/2}else{o=-(Math.PI/2+o)}n.save();n.translate(i,p);n.moveTo(0,0);n.rotate(-o);var l=this.getArrowWidth(n.lineWidth);n.scale(l,l);n.beginPath();e[j].draw(n);n.closePath();n.fill();n.restore()};var f=function(o,k){var j=1/o*2*Math.PI;var m=o%2==0?Math.PI/2+j/2:Math.PI/2;m+=k;var n=new Array(o*2);var p;for(var l=0;l<o;l++){p=l*j+m;n[2*l]=Math.cos(p);n[2*l+1]=Math.sin(-p)}return n};g.ellipse={draw:function(j,l,k,i){j.beginPath();
j.save();j.translate(l._private.position.x,l._private.position.y);j.scale(k/2,i/2);j.arc(0,0,1,0,Math.PI*2,false);j.closePath();j.restore();j.fill()},intersectLine:function(m,l,k,j,n){var i=a.intersectLineEllipse(j,n,m.position().x,m.position().y,l/2+m._private.style["border-width"].value/2,k/2+m._private.style["border-width"].value/2);return i},intersectBox:function(k,p,i,n,j,r,m,l,o){return b.prototype.boxIntersectEllipse(k,p,i,n,o,j,r,m,l)},checkPointRough:function(j,o,n,k,i,m,l){return true},checkPoint:function(j,o,n,k,i,m,l){j-=m;
o-=l;j/=(k+n);o/=(i+n);return(Math.pow(j,2)+Math.pow(o,2)<=1)}};g.triangle={points:f(3,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.triangle.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.triangle.points)},intersectBox:function(k,p,i,n,j,s,m,l,o){var r=g.triangle.points;return renderer.boxIntersectPolygon(k,p,i,n,r,j,s,m,l,[0,-1],o)},checkPointRough:function(j,o,n,k,i,m,l){return renderer.checkInBoundingBox(j,o,g.triangle.points,n,k,i,m,l)
},checkPoint:function(j,o,n,k,i,m,l){return renderer.pointInsidePolygon(j,o,g.triangle.points,m,l,k,i,[0,-1],n)}};g.square={points:f(4,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.square.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.square.points)},intersectBox:function(k,p,i,n,j,s,m,l,o){var r=g.square.points;return renderer.boxIntersectPolygon(k,p,i,n,r,j,s,m,l,[0,-1],o)},checkPointRough:function(j,o,n,k,i,m,l){return renderer.checkInBoundingBox(j,o,g.square.points,n,k,i,m,l)
},checkPoint:function(j,o,n,k,i,m,l){return renderer.pointInsidePolygon(j,o,g.square.points,m,l,k,i,[0,-1],n)}};g.rectangle=g.square;g.roundrectangle=g.square;g.pentagon={points:f(5,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.pentagon.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.pentagon.points)},intersectBox:function(k,p,i,n,j,s,m,l,o){var r=g.pentagon.points;return renderer.boxIntersectPolygon(k,p,i,n,r,j,s,m,l,[0,-1],o)
},checkPointRough:function(j,o,n,k,i,m,l){return renderer.checkInBoundingBox(j,o,g.pentagon.points,n,k,i,m,l)},checkPoint:function(j,o,n,k,i,m,l){return renderer.pointInsidePolygon(j,o,g.pentagon.points,m,l,k,i,[0,-1],n)}};g.hexagon={points:f(6,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.hexagon.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.hexagon.points)},checkPointRough:function(j,o,n,k,i,m,l){return renderer.checkInBoundingBox(j,o,g.hexagon.points,n,k,i,m,l)
},checkPoint:function(j,o,n,k,i,m,l){return renderer.pointInsidePolygon(j,o,g.hexagon.points,m,l,k,i,[0,-1],n)}};g.heptagon={points:f(7,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.heptagon.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.heptagon.points)},checkPointRough:function(j,o,n,k,i,m,l){return checkInBoundingBox(j,o,g.heptagon.points,n,k,i,m,l)},checkPoint:function(j,o,n,k,i,m,l){return pointInsidePolygon(j,o,g.heptagon.points,m,l,k,i,[0,-1],n)
}};g.octogon={points:f(8,0),draw:function(k,j,i){renderer.drawPolygon(k._private.position.x,k._private.position.y,j,i,g.octagon.points)},intersectLine:function(l,k,j,i,m){return renderer.findPolygonIntersection(l,k,j,i,m,g.octagon.points)}};b.prototype.expandPolygon=function(w,l){var m=new Array(w.length*2);var v,u,t,s;for(var p=0;p<w.length/2;p++){v=w[p*2];u=w[p*2+1];if(p<w.length/2-1){t=w[(p+1)*2];s=w[(p+1)*2+1]}else{t=w[0];s=w[1]}var r=(s-u);var o=-(t-v);var n=Math.sqrt(r*r+o*o);var k=r/n;var j=o/n;
m[p*4]=v+k*l;m[p*4+1]=u+j*l;m[p*4+2]=t+k*l;m[p*4+3]=s+j*l}return m};b.prototype.joinLines=function(t){var s=new Array(t.length/2);var v,u,r,p;var n,m,l,k;for(var o=0;o<t.length/4;o++){v=t[o*4];u=t[o*4+1];r=t[o*4+2];p=t[o*4+3];if(o<t.length/4-1){n=t[(o+1)*4];m=t[(o+1)*4+1];l=t[(o+1)*4+2];k=t[(o+1)*4+3]}else{n=t[0];m=t[1];l=t[2];k=t[3]}var j=this.finiteLinesIntersect(v,u,r,p,n,m,l,k,true);s[o*2]=j[0];s[o*2+1]=j[1]}return s};b.prototype.pointInsidePolygon=function(v,t,o,s,p,B,A,H,z){var r=new Array(o.length);
var G=Math.asin(H[1]/(Math.sqrt(H[0]*H[0]+H[1]*H[1])));if(H[0]<0){G=G+Math.PI/2}else{G=-G-Math.PI/2}var l=Math.cos(-G);var j=Math.sin(-G);for(var D=0;D<r.length/2;D++){r[D*2]=B*(o[D*2]*l-o[D*2+1]*j);r[D*2+1]=A*(o[D*2+1]*l+o[D*2]*j);r[D*2]+=s;r[D*2+1]+=p}var C;if(z>0){var I=renderer.expandPolygon(r,-z);C=renderer.joinLines(I)}else{C=r}var F,n,E,m;var k;var u=0;var w=0;for(var D=0;D<C.length/2;D++){F=C[D*2];n=C[D*2+1];if(D+1<C.length/2){E=C[(D+1)*2];m=C[(D+1)*2+1]}else{E=C[(D+1-C.length/2)*2];m=C[(D+1-C.length/2)*2+1]
}if(F==v&&E==v){}else{if((F>=v&&v>=E)||(F<=v&&v<=E)){k=(v-F)/(E-F)*(m-n)+n;if(k>t){u++}if(k<t){w++}}else{continue}}}if(u%2==0){return false}else{return true}};b.prototype.drawPolygon=function(k,p,o,j,n){var m=cy.renderer().context;m.save();m.translate(k,p);m.beginPath();m.scale(o/2,j/2);m.moveTo(n[0],n[1]);for(var l=1;l<n.length/2;l++){m.lineTo(n[l*2],n[l*2+1])}m.closePath();m.fill();m.restore()};b.prototype.checkInBoundingCircle=function(j,p,k,o,l,i,n,m){j=(j-n)/(l+o);p=(p-m)/(i+o);return(j*j+p*p)<=k
};b.prototype.checkInBoundingBox=function(u,s,v,t,l,w,p,o){var n=v[0],m=v[1];var k=v[0],j=v[1];for(var r=1;r<v.length/2;r++){if(v[r*2]<n){n=v[r*2]}else{if(v[r*2]>k){k=v[r*2]}}if(v[r*2+1]<m){m=v[r*2+1]}else{if(v[r*2+1]>j){j=v[r*2+1]}}}u-=p;s-=o;u/=l;s/=w;if(u<n){return false}else{if(u>k){return false}}if(s<m){return false}else{if(s>j){return false}}return true};b.prototype.boxInBezierVicinity=function(u,p,A,r,w,o,v,n,s,l,t){var B=Math.min(u,A)-t;var y=Math.min(p,r)-t;var z=Math.max(u,A)+t;var x=Math.max(p,r)+t;
if(w>=B&&w<=z&&o>=y&&o<=x){return 2}else{if(s>=B&&s<=z&&l>=y&&l<=x){return 2}else{if(v>=B&&v<=z&&n>=y&&n<=x){return 1}}}var m=Math.min(w,v,s);var k=Math.min(o,n,l);var j=Math.max(w,v,s);var i=Math.max(o,n,l);if(m>z||j<B||k>x||i<y){return 0}return 1};b.prototype.checkStraightEdgeCrossesBox=function(x,r,E,u,z,m,y,j,w){var F=Math.min(x,E)-w;var C=Math.min(r,u)-w;var D=Math.max(x,E)+w;var B=Math.max(r,u)+w;var n=y-z;var t=z;var A;var k=j-m;var s=m;var v;if(Math.abs(n)<0.0001){return(z>=F&&z<=D&&Math.min(m,j)<=C&&Math.max(m,j)>=B)
}var i=(F-t)/n;if(i>0&&i<=1){A=k*i+s;if(A>=C&&A<=B){return true}}var p=(D-t)/n;if(p>0&&p<=1){A=k*p+s;if(A>=C&&A<=B){return true}}var l=(C-s)/k;if(l>0&&l<=1){v=n*l+t;if(v>=F&&v<=D){return true}}var o=(B-s)/k;if(o>0&&o<=1){v=n*o+t;if(v>=F&&v<=D){return true}}return false};b.prototype.checkBezierCrossesBox=function(C,n,P,E,w,Y,s,V,p,S,j){var y=Math.min(C,P)-j;var v=Math.min(n,E)-j;var X=Math.max(C,P)+j;var U=Math.max(n,E)+j;if(w>=y&&w<=X&&Y>=v&&Y<=U){return true}else{if(p>=y&&p<=X&&S>=v&&S<=U){return true
}}var B=w-2*s+p;var m=-2*w+2*s;var L=w;var F=[];if(Math.abs(B)<0.0001){var Q=(y-w)/m;var D=(X-w)/m;F.push(Q,D)}else{var I=m*m-4*B*(L-y);var z,x;if(I>0){var J=Math.sqrt(I);z=(-m+J)/(2*B);x=(-m-J)/(2*B);F.push(z,x)}var H=m*m-4*B*(L-X);var u,r;if(H>0){var J=Math.sqrt(H);u=(-m+J)/(2*B);r=(-m-J)/(2*B);F.push(u,r)}}F.sort(function(aa,Z){return aa-Z});var A=Y-2*V+S;var k=-2*Y+2*V;var K=Y;var O=[];if(Math.abs(A)<0.0001){var l=(v-Y)/k;var M=(U-Y)/k;O.push(l,M)}else{var t=k*k-4*A*(K-v);var i,W;if(t>0){var J=Math.sqrt(t);
i=(-k+J)/(2*A);W=(-k-J)/(2*A);O.push(i,W)}var o=k*k-4*A*(K-U);var T,R;if(o>0){var J=Math.sqrt(o);T=(-k+J)/(2*A);R=(-k-J)/(2*A);O.push(T,R)}}O.sort(function(aa,Z){return aa-Z});for(var G=0;G<F.length;G+=2){for(var N=1;N<O.length;N+=2){if(F[G]<O[N]&&O[N]>=0&&F[G]<=1&&F[G+1]>O[N-1]&&O[N-1]<=1&&F[G+1]>=0){return true}}}return false};b.prototype.inBezierVicinity=function(o,n,B,k,A,j,z,i,G){var r=0.25*B+0.5*A+0.25*z;var p=0.25*k+0.5*j+0.25*i;var u,t,E,C;var m,l,s;var F=function(I,O,J,H,N,M,K,L){m=(M-H)*(I-J)+(J-N)*(O-H);
l=m*m;sideSquared=(M-H)*(M-H)+(J-N)*(J-N);if(L){if(m>0){return false}}else{if(m<0){return false}}return(l/sideSquared>K)};var w=(r+A)/2;var v=(p+j)/2;var D=true;if(F(w,v,B,k,A,j,0,D)){D=!D}return(!F(o,n,B,k,A,j,G,D)&&!F(o,n,A,j,z,i,G,D)&&!F(o,n,z,i,B,k,G,D))};b.prototype.solveCubic=function(u,p,o,n,y){p/=u;o/=u;n/=u;var w,j,i,l,x,v,k,m;j=(3*o-(p*p))/9;i=-(27*n)+p*(9*o-2*(p*p));i/=54;w=j*j*j+i*i;y[1]=0;k=(p/3);if(w>0){x=i+Math.sqrt(w);x=((x<0)?-Math.pow(-x,(1/3)):Math.pow(x,(1/3)));v=i-Math.sqrt(w);
v=((v<0)?-Math.pow(-v,(1/3)):Math.pow(v,(1/3)));y[0]=-k+x+v;k+=(x+v)/2;y[4]=y[2]=-k;k=Math.sqrt(3)*(-v+x)/2;y[3]=k;y[5]=-k;return}y[5]=y[3]=0;if(w==0){m=((i<0)?-Math.pow(-i,(1/3)):Math.pow(i,(1/3)));y[0]=-k+2*m;y[4]=y[2]=-(m+k);return}j=-j;l=j*j*j;l=Math.acos(i/Math.sqrt(l));m=2*Math.sqrt(j);y[0]=-k+m*Math.cos(l/3);y[2]=-k+m*Math.cos((l+2*Math.PI)/3);y[4]=-k+m*Math.cos((l+4*Math.PI)/3);return};b.prototype.sqDistanceToQuadraticBezier=function(u,t,B,n,A,m,z,l){var H=1*B*B-4*B*A+2*B*z+4*A*A-4*A*z+z*z+n*n-4*n*m+2*n*l+4*m*m-4*m*l+l*l;
var G=1*9*B*A-3*B*B-3*B*z-6*A*A+3*A*z+9*n*m-3*n*n-3*n*l-6*m*m+3*m*l;var E=1*3*B*B-6*B*A+B*z-B*u+2*A*A+2*A*u-z*u+3*n*n-6*n*m+n*l-n*t+2*m*m+2*m*t-l*t;var D=1*B*A-B*B+B*u-A*u+n*m-n*n+n*t-m*t;c("coefficients: "+H/H+", "+G/H+", "+E/H+", "+D/H);var o=[];this.solveCubic(H,G,E,D,o);var j=1e-7;var F=[];for(var p=0;p<6;p+=2){if(Math.abs(o[p+1])<j&&o[p]>=0&&o[p]<=1){F.push(o[p])}}F.push(1);F.push(0);var k=-1;var C;var s,r,v;for(var w=0;w<F.length;w++){s=Math.pow(1-F[w],2)*B+2*(1-F[w])*F[w]*A+F[w]*F[w]*z;r=Math.pow(1-F[w],2)*n+2*(1-F[w])*F[w]*m+F[w]*F[w]*l;
v=Math.pow(s-u,2)+Math.pow(r-t,2);c("distance for param "+F[w]+": "+Math.sqrt(v));if(k>=0){if(v<k){k=v;C=F[w]}}else{k=v;C=F[w]}}c("given: ( "+u+", "+t+"), ( "+B+", "+n+"), ( "+A+", "+m+"), ( "+z+", "+l+")");c("roots: "+o);c("params: "+F);c("closest param: "+C);return k};b.prototype.sqDistanceToFiniteLine=function(r,n,j,p,i,o){var k=[r-j,n-p];var t=[i-j,o-p];var l=t[0]*t[0]+t[1]*t[1];var s=k[0]*k[0]+k[1]*k[1];var m=Math.pow(k[0]*t[0]+k[1]*t[1],2)/l;if(m<0){return s}if(m>l){return(r-i)*(r-i)+(n-o)*(n-o)
}return(s-m)};var c=function(){};d("renderer","canvas",b)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);cy.trigger("layoutstop")};a("layout","null",c)
})(cytoscape);(function(a){var c={ready:undefined,stop:undefined,fit:true};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var h=this.options;var j=h.cy;var g=j.nodes();var f=j.edges();var e=j.container();var i=e.clientWidth;var d=e.clientHeight;g.positions(function(l,k){if(k.locked()){return false}return{x:Math.round(Math.random()*i),y:Math.round(Math.random()*d)}});j.one("layoutready",h.ready);j.trigger("layoutready");if(h.fit){j.fit()}j.one("layoutstop",h.stop);
j.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","random",b)})(cytoscape);(function(a){var c={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};function b(d){this.options=a.util.extend({},c,d)}b.prototype.run=function(){var w=options=this.options;var g=w.cy;var t=g.nodes();var f=g.edges();var o=g.container();var s=o.clientWidth;var r=o.clientHeight;if(r==0||s==0){t.positions(function(){return{x:0,y:0}})}else{var h=t.size();var m=Math.sqrt(h*r/s);var l=Math.round(m);
var n=Math.round(s/r*m);function k(y){if(y==undefined){return Math.min(l,n)}else{var x=Math.min(l,n);if(x==l){l=y}else{n=y}}}function d(y){if(y==undefined){return Math.max(l,n)}else{var x=Math.max(l,n);if(x==l){l=y}else{n=y}}}if(options.rows!=null&&options.columns!=null){l=options.rows;n=options.columns}else{if(options.rows!=null&&options.columns==null){l=options.rows;n=Math.ceil(h/l)}else{if(options.rows==null&&options.columns!=null){n=options.columns;l=Math.ceil(h/n)}else{if(n*l>h){var v=k();var p=d();
if((v-1)*p>=h){k(v-1)}else{if((p-1)*v>=h){d(p-1)}}}else{while(n*l<h){var v=k();var p=d();if((p+1)*v>=h){d(p+1)}else{k(v+1)}}}}}}var u=s/n;var e=r/l;var j=0;var i=0;t.positions(function(B,A){if(A.locked()){return false}var z=i*u+u/2;var C=j*e+e/2;i++;if(i>=n){i=0;j++}return{x:z,y:C}})}if(w.fit){g.reset()}g.one("layoutready",w.ready);g.trigger("layoutready");g.one("layoutstop",w.stop);g.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","grid",b)})(cytoscape);(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined};
function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false}return j});if(g.pan!=null){i.pan(g.pan)}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");
if(g.fit){i.fit()}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(d){var f=d;
return(f.max<=0.5)||(f.mean<=0.3)}};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var k=this.options;var j=k.cy;var v=j.nodes();var i=j.edges();var p=j.container();var u=p.clientWidth;var s=p.clientHeight;if(j.nodes().size()<=1){if(k.fit){j.reset()}j.nodes().position({x:Math.round(u/2),y:Math.round(s/2)});j.one("layoutstop",k.stop);j.trigger("layoutstop");j.one("layoutstop",k.stop);j.trigger("layoutstop");return}var m=this.system=arbor.ParticleSystem(k.repulsion,k.stiffness,k.friction,k.gravity,k.fps,k.dt,k.precision);
this.system=m;if(k.liveUpdate&&k.fit){j.reset()}var t=250;var g;var o=false;var f=+new Date;var r={init:function(x){},redraw:function(){var y=m.energy();if(k.stableEnergy!=null&&y!=null&&y.n>0&&k.stableEnergy(y)){m.stop();return}clearTimeout(g);g=setTimeout(w,t);var z=[];m.eachNode(function(F,A){var E=F.name;var C=F.data;var B=C.element;if(B==null){return}var D=B._private.position;if(!B.locked()&&!B.grabbed()){D.x=A.x;D.y=A.y;z.push(B)}});var x=(+new Date-f)>=16;if(k.liveUpdate&&z.length>0&&x){new a.Collection(j,z).rtrigger("position");
f=+new Date}if(!o){o=true;j.one("layoutready",k.ready);j.trigger("layoutready")}}};m.renderer=r;m.screenSize(u,s);m.screenPadding(k.padding[0],k.padding[1],k.padding[2],k.padding[3]);m.screenStep(k.stepSize);function n(x,y){if(y==null){return undefined}else{if(typeof y==typeof function(){}){return y.apply(x,[x._private.data,{nodes:v.length,edges:i.length,element:x}])}else{return y}}}function d(D){var G=D.x;var E=D.y;var H=u;var B=s;var A=-2;var I=2;var F=-2;var z=2;var C=4;return{x:G/H*C+A,y:E/B*C+I}
}var l=function(y){grabbed=this;var z=m.fromScreen(this.position());var x=arbor.Point(z.x,z.y);this.scratch().arbor.p=x;switch(y.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};v.bind("grab drag dragstop",l);v.each(function(z,A){var C=this._private.data.id;var y=n(this,k.nodeMass);var x=this._private.locked;var B=d({x:A.position().x,y:A.position().y});this.scratch().arbor=m.addNode(C,{element:this,mass:y,fixed:x,x:x?B.x:undefined,y:x?B.y:undefined})
});i.each(function(){var A=this.id();var y=this.source().id();var z=this.target().id();var x=n(this,k.edgeLength);this.scratch().arbor=m.addEdge(y,z,{length:x})});function h(x){if(k.fit){j.fit()}x()}var e=v.filter(":grabbable");if(k.ungrabifyWhileSimulating){e.ungrabify()}var w=function(){if($.browser.msie){h(function(){x()})}else{x()}function x(){if(!k.liveUpdate){if(k.fit){j.reset()}j.nodes().rtrigger("position")}v.unbind("grab drag dragstop",l);if(k.ungrabifyWhileSimulating){e.grabify()}j.one("layoutstop",k.stop);
j.trigger("layoutstop")}};m.start();setTimeout(function(){m.stop()},k.maxSimulationTime)};c.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",c)})(cytoscape);